{
    "openapi": "3.0.1",
    "info": {
        "title": "API Приема платежей",
        "version": "1.0"
    },
    "servers": [
        {
            "url": "https://enter.tochka.com/uapi/pay/",
            "description": "Боевой сервер Production"
        },
        {
            "url": "https://enter.tochka.com/sandbox/v2/pay/",
            "description": "Сервер песочницы"
        }
    ],
    "tags": [
        {
            "name": "Платежи",
            "description": "Методы для проведения платежей"
        },
        {
            "name": "Возвраты",
            "description": "Методы для проведения возвратов"
        }
    ],
    "paths": {
        "/v1/sites/{siteUid}/payments/{paymentUid}": {
            "get": {
                "tags": [
                    "Платежи"
                ],
                "summary": "Получение информации о платеже",
                "description": "<Описание метода получени информации платежа>",
                "operationId": "getPayment",
                "parameters": [
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/siteUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "paymentUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/paymentUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessWrappedResponseDTO"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "$ref": "#/components/schemas/ErrorResponseDTO"
                                        },
                                        {
                                            "$ref": "#/components/schemas/SuccessWrappedResponseDTO"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Платежи"
                ],
                "summary": "Создание платежа",
                "description": "<Описание метода создания платежа>",
                "operationId": "createPayment",
                "parameters": [
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/siteUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "paymentUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/paymentUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/WrappedRequestDTOCreatePaymentRequestDTO"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessWrappedResponseDTO"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "$ref": "#/components/schemas/ErrorResponseDTO"
                                        },
                                        {
                                            "$ref": "#/components/schemas/SuccessWrappedResponseDTO"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/sites/{siteUid}/payments/{paymentUid}/refunds/{refundUid}": {
            "get": {
                "tags": [
                    "Возвраты"
                ],
                "operationId": "getRefund",
                "parameters": [
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "paymentUid",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    },
                    {
                        "name": "refundUid",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "$ref": "#/components/schemas/ErrorResponseDTO"
                                        },
                                        {
                                            "$ref": "#/components/schemas/SuccessWrappedResponseDTO"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Возвраты"
                ],
                "operationId": "createRefund",
                "parameters": [
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "paymentUid",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    },
                    {
                        "name": "refundUid",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/WrappedRequestDTORefundRequestDTO"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "$ref": "#/components/schemas/ErrorResponseDTO"
                                        },
                                        {
                                            "$ref": "#/components/schemas/SuccessWrappedResponseDTO"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/sites/{siteUid}/payments/{paymentUid}/captures/{captureUid}": {
            "get": {
                "tags": [
                    "capture-controller"
                ],
                "operationId": "getCapture",
                "parameters": [
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "paymentUid",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    },
                    {
                        "name": "captureUid",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "$ref": "#/components/schemas/ErrorResponseDTO"
                                        },
                                        {
                                            "$ref": "#/components/schemas/SuccessWrappedResponseDTO"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "capture-controller"
                ],
                "operationId": "createCapture",
                "parameters": [
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "paymentUid",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    },
                    {
                        "name": "captureUid",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/WrappedRequestDTOCaptureRequestDTO"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "$ref": "#/components/schemas/ErrorResponseDTO"
                                        },
                                        {
                                            "$ref": "#/components/schemas/SuccessWrappedResponseDTO"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/sites/{siteUid}/payments": {
            "post": {
                "tags": [
                    "Платежи"
                ],
                "summary": "Создание платежа",
                "description": "<Описание метода создания платежа>",
                "operationId": "createPayment_1",
                "parameters": [
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/siteUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/WrappedRequestDTOCreatePaymentRequestDTO"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "$ref": "#/components/schemas/PaymentSuccessResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "$ref": "#/components/schemas/ErrorResponseDTO"
                                        },
                                        {
                                            "$ref": "#/components/schemas/SuccessWrappedResponseDTO"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/sites/{siteUid}/payments/{paymentUid}/refunds": {
            "get": {
                "tags": [
                    "Возвраты"
                ],
                "operationId": "getRefunds",
                "parameters": [
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "paymentUid",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "$ref": "#/components/schemas/ErrorResponseDTO"
                                        },
                                        {
                                            "$ref": "#/components/schemas/SuccessWrappedResponseDTO"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Возвраты"
                ],
                "summary": "Создание операции возврата",
                "description": "<Описание метода создания возврата>",
                "operationId": "createRefund_1",
                "parameters": [
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/siteUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "paymentUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/paymentUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/WrappedRequestDTORefundRequestDTO"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "$ref": "#/components/schemas/RefundSuccessResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "$ref": "#/components/schemas/ErrorResponseDTO"
                                        },
                                        {
                                            "$ref": "#/components/schemas/SuccessWrappedResponseDTO"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/sites/{siteUid}/payments/{paymentUid}/complete": {
            "post": {
                "tags": [
                    "Завершение аутентификации"
                ],
                "summary": "Завершение аутентификации",
                "description": "<Описание метода завершения аутентификации>",
                "operationId": "completePayment",
                "parameters": [
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/siteUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "paymentUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/paymentUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/WrappedRequestDTOCompleteRequestDTO"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessWrappedResponseDTO"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "$ref": "#/components/schemas/ErrorResponseDTO"
                                        },
                                        {
                                            "$ref": "#/components/schemas/SuccessWrappedResponseDTO"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/sites/{siteUid}/payments/{paymentUid}/captures": {
            "get": {
                "tags": [
                    "capture-controller"
                ],
                "operationId": "getCaptures",
                "parameters": [
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "paymentUid",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "$ref": "#/components/schemas/ErrorResponseDTO"
                                        },
                                        {
                                            "$ref": "#/components/schemas/SuccessWrappedResponseDTO"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "capture-controller"
                ],
                "operationId": "createCapture_1",
                "parameters": [
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "paymentUid",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/WrappedRequestDTOCaptureRequestDTO"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "$ref": "#/components/schemas/ErrorResponseDTO"
                                        },
                                        {
                                            "$ref": "#/components/schemas/SuccessWrappedResponseDTO"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "PaymentAmount": {
                "required": [
                    "currency",
                    "value"
                ],
                "type": "object",
                "properties": {
                    "currency": {
                        "type": "string",
                        "description": "Валюта в формате ISO4217",
                        "example": "RUB"
                    },
                    "value": {
                        "type": "number",
                        "description": "Сумма операции",
                        "example": 100.0
                    }
                },
                "description": "Информация о сумме операции"
            },
            "CapturedAmount": {
                "required": [
                    "currency",
                    "value"
                ],
                "type": "object",
                "properties": {
                    "currency": {
                        "type": "string",
                        "description": "Валюта в формате ISO4217",
                        "example": "RUB"
                    },
                    "value": {
                        "type": "number",
                        "description": "Сумма операции",
                        "example": 100.0
                    }
                },
                "description": "Информация о сумме подтверждений"
            },
            "RefundedAmount": {
                "required": [
                    "currency",
                    "value"
                ],
                "type": "object",
                "properties": {
                    "currency": {
                        "type": "string",
                        "description": "Валюта в формате ISO4217",
                        "example": "RUB"
                    },
                    "value": {
                        "type": "number",
                        "description": "Сумма операции",
                        "example": 100.0
                    }
                },
                "description": "Информация о сумме возвратов"
            },
            "PaymentSuccessResponse": {
                "required": [
                    "Data",
                    "Links",
                    "Meta"
                ],
                "type": "object",
                "properties": {
                    "Data": {
                        "required": [
                            "amount",
                            "capturedAmount",
                            "createdDateTime",
                            "isTest",
                            "paymentMethod",
                            "paymentUid",
                            "refundedAmount",
                            "status"
                        ],
                        "type": "object",
                        "properties": {
                            "paymentUid": {
                                "pattern": "^[0-9a-zA-Z-]{1,64}$",
                                "type": "string",
                                "description": "Уникальный идентификатор платежа в информационной системе ТСП",
                                "example": "977639EE70494C67"
                            },
                            "createdDateTime": {
                                "type": "string",
                                "description": "Дата создания платежа",
                                "format": "date-time"
                            },
                            "orderUid": {
                                "pattern": "^[0-9a-zA-Z-]{1,64}$",
                                "type": "string",
                                "description": "Идентификатор заказа",
                                "example": "12EKN0170494C67"
                            },
                            "amount": {
                                "$ref": "#/components/schemas/PaymentAmount"
                            },
                            "capturedAmount": {
                                "$ref": "#/components/schemas/CapturedAmount"
                            },
                            "refundedAmount": {
                                "$ref": "#/components/schemas/RefundedAmount"
                            },
                            "paymentMethod": {
                                "oneOf": [
                                    {
                                        "$ref": "#/components/schemas/CardPaymentMethodResultDTO"
                                    }
                                ]
                            },
                            "status": {
                                "oneOf": [
                                    {
                                        "$ref": "#/components/schemas/COMPLETED"
                                    },
                                    {
                                        "$ref": "#/components/schemas/DECLINED"
                                    },
                                    {
                                        "$ref": "#/components/schemas/WAITING"
                                    }
                                ]
                            },
                            "customer": {
                                "$ref": "#/components/schemas/CustomerDTO"
                            },
                            "deviceData": {
                                "$ref": "#/components/schemas/DeviceDataDTO"
                            },
                            "requirements": {
                                "$ref": "#/components/schemas/RequirementsDTO"
                            },
                            "callbackUrl": {
                                "maxLength": 2083,
                                "minLength": 1,
                                "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                                "type": "string",
                                "description": "URL отправки уведомления об операции",
                                "example": "https://test.tochkapay.com/notification"
                            },
                            "successUrl": {
                                "maxLength": 2083,
                                "minLength": 1,
                                "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                                "type": "string",
                                "description": "URL для перенаправления при успешной операции",
                                "example": "https://test.tochkapay.com/success"
                            },
                            "declineUrl": {
                                "maxLength": 2083,
                                "minLength": 1,
                                "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                                "type": "string",
                                "description": "URL для перенаправления при отклоненной операции",
                                "example": "https://test.tochkapay.com/decline"
                            },
                            "comment": {
                                "maxLength": 255,
                                "minLength": 1,
                                "type": "string",
                                "description": "Комментарий"
                            },
                            "extras": {
                                "type": "object",
                                "additionalProperties": {
                                    "type": "string",
                                    "description": "Дополнительные поля с произвольной информацией"
                                },
                                "description": "Дополнительные поля с произвольной информацией"
                            },
                            "receiverData": {
                                "$ref": "#/components/schemas/ReceiverDataDTO"
                            },
                            "captureMode": {
                                "type": "string",
                                "description": "Признак двухстадийного сценария",
                                "enum": [
                                    "AUTO",
                                    "MANUAL"
                                ]
                            },
                            "isAft": {
                                "type": "boolean",
                                "description": "Флаг AFT операции"
                            },
                            "isTest": {
                                "type": "boolean",
                                "description": "Флаг тестовой операции"
                            }
                        }
                    },
                    "Links": {
                        "$ref": "#/components/schemas/LinksDTO"
                    },
                    "Meta": {
                        "$ref": "#/components/schemas/MetaDTO"
                    }
                }
            },
            "RefundSuccessResponse": {
                "required": [
                    "Data",
                    "Links",
                    "Meta"
                ],
                "type": "object",
                "properties": {
                    "Data": {
                        "required": [
                            "amount",
                            "createdDateTime",
                            "isReversal",
                            "refundUid",
                            "status"
                        ],
                        "type": "object",
                        "properties": {
                            "refundUid": {
                                "pattern": "^[0-9a-zA-Z-]{1,64}$",
                                "type": "string"
                            },
                            "createdDateTime": {
                                "type": "string",
                                "format": "date-time"
                            },
                            "amount": {
                                "$ref": "#/components/schemas/MoneyDTO"
                            },
                            "status": {
                                "oneOf": [
                                    {
                                        "$ref": "#/components/schemas/COMPLETED"
                                    },
                                    {
                                        "$ref": "#/components/schemas/DECLINED"
                                    },
                                    {
                                        "$ref": "#/components/schemas/WAITING"
                                    }
                                ]
                            },
                            "callbackUrl": {
                                "maxLength": 2083,
                                "minLength": 1,
                                "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                                "type": "string",
                                "description": "URL отправки уведомления об операции",
                                "example": "https://test.tochkapay.com/notification"
                            },
                            "comment": {
                                "maxLength": 255,
                                "minLength": 1,
                                "type": "string",
                                "description": "Комментарий"
                            },
                            "refundMethodResult": {
                                "oneOf": [
                                    {
                                        "$ref": "#/components/schemas/CardRefundMethodResultDTO"
                                    }
                                ]
                            },
                            "isReversal": {
                                "type": "boolean"
                            }
                        }
                    },
                    "Links": {
                        "$ref": "#/components/schemas/LinksDTO"
                    },
                    "Meta": {
                        "$ref": "#/components/schemas/MetaDTO"
                    }
                }
            },
            "LinksDTO": {
                "required": [
                    "self"
                ],
                "type": "object",
                "properties": {
                    "self": {
                        "maxLength": 2083,
                        "minLength": 1,
                        "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                        "type": "string",
                        "example": "https://enter.tochka.com/uapi/pay"
                    }
                }
            },
            "MetaDTO": {
                "required": [
                    "totalPages"
                ],
                "type": "object",
                "properties": {
                    "totalPages": {
                        "type": "integer",
                        "format": "int32"
                    }
                }
            },
            "SuccessWrappedResponseDTO": {
                "required": [
                    "Data",
                    "Links",
                    "Meta"
                ],
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/WrappedResponseDTOPaymentResponseDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "Data": {
                                "type": "object"
                            },
                            "Links": {
                                "$ref": "#/components/schemas/LinksDTO"
                            },
                            "Meta": {
                                "$ref": "#/components/schemas/MetaDTO"
                            }
                        }
                    },
                    {
                        "$ref": "#/components/schemas/WrappedResponseDTOListRefundResponseDTO"
                    },
                    {
                        "$ref": "#/components/schemas/WrappedResponseDTORefundResponseDTO"
                    },
                    {
                        "$ref": "#/components/schemas/WrappedResponseDTOListCaptureResponseDTO"
                    },
                    {
                        "$ref": "#/components/schemas/WrappedResponseDTOCaptureResponseDTO"
                    }
                ]
            },
            "AddressDTO": {
                "type": "object",
                "properties": {
                    "country": {
                        "maxLength": 64,
                        "minLength": 1,
                        "type": "string",
                        "description": "Страна адреса покупателя",
                        "example": "Russia"
                    },
                    "region": {
                        "maxLength": 64,
                        "minLength": 1,
                        "type": "string",
                        "description": "Регион адреса покупателя",
                        "example": "Moscow"
                    },
                    "city": {
                        "maxLength": 64,
                        "minLength": 1,
                        "type": "string",
                        "description": "Город адреса покупателя",
                        "example": "Moscow city"
                    },
                    "details": {
                        "maxLength": 256,
                        "minLength": 1,
                        "type": "string",
                        "description": "Детали адреса покупателя",
                        "example": "Verhnyaya Radishchevskaya ulica, dom 2/1"
                    }
                },
                "description": "Адрес покупателя"
            },
            "CardPaymentMethodDTO": {
                "required": [
                    "expirationDate",
                    "pan",
                    "type"
                ],
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/PaymentMethodDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "pan": {
                                "pattern": "^\\d{13,19}$",
                                "type": "string",
                                "description": "Номер банковской карты",
                                "example": "22279992308606"
                            },
                            "expirationDate": {
                                "pattern": "(?:0?[1-9]|1[0-2])/[0-9]{2}",
                                "type": "string",
                                "description": "Срок действия банковской карты"
                            },
                            "cvv2": {
                                "pattern": "^\\d{3}$",
                                "type": "string",
                                "description": "CVV2/CVC2 на банковской карте",
                                "example": "12/28"
                            },
                            "holderName": {
                                "pattern": "^[0-9a-zA-Z-/ _.']{1,26}$",
                                "type": "string",
                                "description": "Имя клиента, указанное на банковской карте",
                                "example": "CARD HOLDER"
                            },
                            "createToken": {
                                "type": "boolean",
                                "description": "Флаг для выпуска платежного токена"
                            },
                            "type": {
                                "type": "string",
                                "enum": [
                                    "CARD"
                                ]
                            }
                        }
                    }
                ]
            },
            "CreatePaymentRequestDTO": {
                "required": [
                    "amount",
                    "captureMode",
                    "extras",
                    "isAft",
                    "paymentMethod"
                ],
                "type": "object",
                "properties": {
                    "paymentUid": {
                        "pattern": "^[0-9a-zA-Z-]{1,64}$",
                        "type": "string",
                        "description": "Уникальный идентификатор платежа в информационной системе ТСП",
                        "example": "977639EE70494C67"
                    },
                    "orderUid": {
                        "pattern": "^[0-9a-zA-Z-]{1,64}$",
                        "type": "string",
                        "description": "Идентификатор заказа",
                        "example": "12EKN0170494C67"
                    },
                    "amount": {
                        "$ref": "#/components/schemas/PaymentAmount"
                    },
                    "paymentMethod": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/CardPaymentMethodDTO"
                            }
                        ]
                    },
                    "customer": {
                        "$ref": "#/components/schemas/CustomerDTO"
                    },
                    "deviceData": {
                        "$ref": "#/components/schemas/DeviceDataDTO"
                    },
                    "callbackUrl": {
                        "maxLength": 2083,
                        "minLength": 1,
                        "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                        "type": "string",
                        "description": "URL отправки уведомления об операции",
                        "example": "https://test.tochkapay.com/notification"
                    },
                    "successUrl": {
                        "maxLength": 2083,
                        "minLength": 1,
                        "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                        "type": "string",
                        "description": "URL для перенаправления при успешной операции",
                        "example": "https://test.tochkapay.com/success"
                    },
                    "declineUrl": {
                        "maxLength": 2083,
                        "minLength": 1,
                        "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                        "type": "string",
                        "description": "URL для перенаправления при отклоненной операции",
                        "example": "https://test.tochkapay.com/decline"
                    },
                    "comment": {
                        "maxLength": 255,
                        "minLength": 1,
                        "type": "string",
                        "description": "Комментарий"
                    },
                    "extras": {
                        "type": "object",
                        "additionalProperties": {
                            "type": "string",
                            "description": "Дополнительные поля с произвольной информацией"
                        },
                        "description": "Дополнительные поля с произвольной информацией"
                    },
                    "receiverData": {
                        "$ref": "#/components/schemas/ReceiverDataDTO"
                    },
                    "captureMode": {
                        "type": "string",
                        "description": "Признак двухстадийного сценария",
                        "enum": [
                            "AUTO",
                            "MANUAL"
                        ]
                    },
                    "isAft": {
                        "type": "boolean",
                        "description": "Флаг AFT операции"
                    }
                }
            },
            "CustomerDTO": {
                "type": "object",
                "properties": {
                    "account": {
                        "maxLength": 64,
                        "minLength": 1,
                        "type": "string",
                        "description": "Идентификатор пользователя",
                        "example": "E268443E43D93DAB7EBEF303BBE9642F"
                    },
                    "email": {
                        "maxLength": 64,
                        "minLength": 1,
                        "pattern": "^[^@\\s]+@[^@\\s]+$",
                        "type": "string",
                        "description": "E-mail пользователя",
                        "example": "pay@tochka.com"
                    },
                    "phone": {
                        "pattern": "^\\+?\\d{11,16}$",
                        "type": "string",
                        "description": "Номер телефона пользователя",
                        "example": "79123456789"
                    },
                    "bic": {
                        "pattern": "^\\d{8,11}$",
                        "type": "string",
                        "description": "БИК банка, выпустившего карту",
                        "example": "044525104"
                    },
                    "bankAccount": {
                        "pattern": "^\\d{20}$",
                        "type": "string",
                        "description": "Номер счета плательщика",
                        "example": "044525104"
                    },
                    "firstName": {
                        "maxLength": 64,
                        "minLength": 1,
                        "type": "string",
                        "description": "Имя покупателя",
                        "example": "Ivan"
                    },
                    "middleName": {
                        "maxLength": 64,
                        "minLength": 1,
                        "type": "string",
                        "description": "Отчество покупателя",
                        "example": "Ivanov"
                    },
                    "lastName": {
                        "maxLength": 64,
                        "minLength": 1,
                        "type": "string",
                        "description": "Фамилия покупателя",
                        "example": "Ivanov"
                    },
                    "inn": {
                        "pattern": "^(\\d{10}|\\d{12})$",
                        "type": "string",
                        "description": "ИНН покупателя",
                        "example": "775598987121"
                    },
                    "bankMemberId": {
                        "pattern": "^\\d{12}$",
                        "type": "string",
                        "description": "Идентификатор банка покупателя",
                        "example": "100000000284"
                    },
                    "simpleAddress": {
                        "maxLength": 256,
                        "minLength": 1,
                        "type": "string",
                        "description": "Адрес покупателя",
                        "example": "Verhnyaya Radishchevskaya ulica, dom 2/1"
                    },
                    "address": {
                        "$ref": "#/components/schemas/AddressDTO"
                    }
                }
            },
            "DeviceDataDTO": {
                "type": "object",
                "properties": {
                    "ip": {
                        "pattern": "^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$",
                        "type": "string",
                        "description": "IP Адрес клиента",
                        "example": "127.0.0.1"
                    },
                    "dateTime": {
                        "type": "string",
                        "description": "Локальное время клиента в формате формате ISO8601",
                        "format": "date-time"
                    },
                    "screenResolution": {
                        "pattern": "^\\d{1,5}x\\d{1,4}$",
                        "type": "string",
                        "description": "Разрешение экрана клиента",
                        "example": "1024x768"
                    },
                    "timeOnPage": {
                        "type": "integer",
                        "description": "Время просмотра страницы браузераа",
                        "format": "int64",
                        "example": 732
                    },
                    "userAgent": {
                        "maxLength": 1024,
                        "minLength": 1,
                        "type": "string",
                        "description": "Данные о браузере клиента",
                        "example": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)"
                    },
                    "fingerprint": {
                        "maxLength": 2048,
                        "minLength": 1,
                        "type": "string",
                        "description": "Уникальный идентификатор устройства клиента",
                        "example": "52609E00B7EE307E79EB100099B9A8BF"
                    }
                }
            },
            "MoneyDTO": {
                "$ref": "#/components/schemas/PaymentAmount"
            },
            "PaymentMethodDTO": {
                "required": [
                    "type"
                ],
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string",
                        "description": "Тип платежного метода",
                        "enum": [
                            "CARD"
                        ]
                    }
                },
                "description": "Метод платежа",
                "discriminator": {
                    "propertyName": "type"
                }
            },
            "ReceiverDataDTO": {
                "type": "object",
                "properties": {
                    "pan": {
                        "pattern": "^\\d{13,19}$",
                        "type": "string",
                        "description": "Номер карты получателя",
                        "example": "22279992308606"
                    },
                    "wallet": {
                        "maxLength": 64,
                        "minLength": 1,
                        "type": "string",
                        "description": "Номер кошелька получателя платежа"
                    },
                    "inn": {
                        "pattern": "^(\\d{10}|\\d{12})$",
                        "type": "string",
                        "description": "ИНН организации-эмитента",
                        "example": "775598987121"
                    },
                    "phone": {
                        "pattern": "^\\+?\\d{11,16}$",
                        "type": "string",
                        "description": "Номер телефона получателя платежа",
                        "example": "79123456789"
                    },
                    "bic": {
                        "pattern": "^\\d{8,11}$",
                        "type": "string",
                        "description": "БИК кредитной организации получателя платежа",
                        "example": "044525104"
                    },
                    "bankAccount": {
                        "pattern": "^\\d{20}$",
                        "type": "string",
                        "description": "Номер счета получателя платежа",
                        "example": "044525104"
                    }
                }
            },
            "WrappedRequestDTOCreatePaymentRequestDTO": {
                "required": [
                    "Data"
                ],
                "type": "object",
                "properties": {
                    "Data": {
                        "$ref": "#/components/schemas/CreatePaymentRequestDTO"
                    }
                }
            },
            "ErrorDetailsDTO": {
                "required": [
                    "errorCode",
                    "message",
                    "url"
                ],
                "type": "object",
                "properties": {
                    "errorCode": {
                        "maxLength": 200,
                        "minLength": 1,
                        "type": "string",
                        "description": "Низкоуровневое текстовое описание ошибки",
                        "example": "HTTPBadRequest"
                    },
                    "message": {
                        "maxLength": 603,
                        "minLength": 1,
                        "type": "string",
                        "description": "Описание ошибки. Обрезается если длина ошибки превышает максимальное значение",
                        "example": "Something going wrong"
                    },
                    "url": {
                        "maxLength": 2083,
                        "minLength": 1,
                        "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                        "type": "string",
                        "description": "URL для помощи в устранении проблемы",
                        "example": "http://enter.tochka.com/open-banking/docs"
                    }
                },
                "description": "Описание ошибки валидации конкретного поля"
            },
            "ErrorResponseDTO": {
                "required": [
                    "Errors",
                    "code",
                    "id",
                    "message"
                ],
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/WrappedResponseDTOPaymentResponseDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "code": {
                                "maxLength": 40,
                                "minLength": 1,
                                "type": "string",
                                "description": "Высокоуровневый текстовый код ошибки, необходимый для классификации",
                                "example": "400"
                            },
                            "id": {
                                "maxLength": 40,
                                "minLength": 1,
                                "type": "string",
                                "description": "Уникальный идентификатор ошибки, для целей аудита",
                                "example": "c397b21a-d998-4c4d-9471-e60eaf816b87"
                            },
                            "message": {
                                "maxLength": 600,
                                "minLength": 1,
                                "type": "string",
                                "description": "Краткое сообщение об ошибке",
                                "example": "Что-то пошло не так"
                            },
                            "Errors": {
                                "type": "array",
                                "description": "Описание ошибки валидации конкретного поля",
                                "items": {
                                    "$ref": "#/components/schemas/ErrorDetailsDTO"
                                }
                            }
                        }
                    },
                    {
                        "$ref": "#/components/schemas/WrappedResponseDTORefundResponseDTO"
                    },
                    {
                        "$ref": "#/components/schemas/WrappedResponseDTOCaptureResponseDTO"
                    },
                    {
                        "$ref": "#/components/schemas/WrappedResponseDTOListRefundResponseDTO"
                    },
                    {
                        "$ref": "#/components/schemas/WrappedResponseDTOListCaptureResponseDTO"
                    }
                ]
            },
            "WrappedResponseDTOPaymentResponseDTO": {
                "type": "object"
            },
            "RefundRequestDTO": {
                "type": "object",
                "properties": {
                    "refundUid": {
                        "pattern": "^[0-9a-zA-Z-]{1,64}$",
                        "type": "string",
                        "description": "Идентификатор операции"
                    },
                    "amount": {
                        "$ref": "#/components/schemas/MoneyDTO"
                    },
                    "callbackUrl": {
                        "maxLength": 2083,
                        "minLength": 1,
                        "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                        "type": "string",
                        "description": "URL отправки уведомления об операции",
                        "example": "https://test.tochkapay.com/notification"
                    },
                    "comment": {
                        "maxLength": 255,
                        "minLength": 1,
                        "type": "string",
                        "description": "Дополнительное описание возврата",
                        "example": "Возврат за услугу"
                    }
                }
            },
            "WrappedRequestDTORefundRequestDTO": {
                "required": [
                    "Data"
                ],
                "type": "object",
                "properties": {
                    "Data": {
                        "$ref": "#/components/schemas/RefundRequestDTO"
                    }
                }
            },
            "WrappedResponseDTORefundResponseDTO": {
                "type": "object"
            },
            "CaptureRequestDTO": {
                "type": "object",
                "properties": {
                    "captureUid": {
                        "pattern": "^[0-9a-zA-Z-]{1,64}$",
                        "type": "string"
                    },
                    "amount": {
                        "$ref": "#/components/schemas/MoneyDTO"
                    },
                    "callbackUrl": {
                        "maxLength": 2083,
                        "minLength": 1,
                        "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                        "type": "string",
                        "description": "URL отправки уведомления об операции",
                        "example": "https://test.tochkapay.com/notification"
                    },
                    "comment": {
                        "maxLength": 255,
                        "minLength": 1,
                        "type": "string",
                        "description": "Комментарий"
                    }
                }
            },
            "WrappedRequestDTOCaptureRequestDTO": {
                "required": [
                    "Data"
                ],
                "type": "object",
                "properties": {
                    "Data": {
                        "$ref": "#/components/schemas/CaptureRequestDTO"
                    }
                }
            },
            "WrappedResponseDTOCaptureResponseDTO": {
                "type": "object"
            },
            "CompleteRequestDTO": {
                "required": [
                    "threeDS"
                ],
                "type": "object",
                "properties": {
                    "threeDS": {
                        "$ref": "#/components/schemas/ThreeDSCompleteRequestDTO"
                    }
                }
            },
            "ThreeDSCompleteRequestDTO": {
                "required": [
                    "paRes"
                ],
                "type": "object",
                "properties": {
                    "paRes": {
                        "maxLength": 16384,
                        "minLength": 1,
                        "type": "string",
                        "description": "Результат аутентификации покупателя, полученный после возврата с ACS банка-эмитента",
                        "example": "eJxVjDsOwjAQBe+S0SWKiXHdwMhWmCbXIpZWa+O..."
                    }
                },
                "description": "Данные для аутентификации банковских карт по протоколам 3DS и 3DS 2.0"
            },
            "WrappedRequestDTOCompleteRequestDTO": {
                "required": [
                    "Data"
                ],
                "type": "object",
                "properties": {
                    "Data": {
                        "$ref": "#/components/schemas/CompleteRequestDTO"
                    }
                }
            },
            "WrappedResponseDTOListRefundResponseDTO": {
                "type": "object"
            },
            "WrappedResponseDTOListCaptureResponseDTO": {
                "type": "object"
            }
        },
        "parameters": {
            "siteUid": {
                "name": "siteUid",
                "in": "path",
                "description": "ID Сайта",
                "required": true,
                "schema": {
                    "pattern": "^[0-9a-zA-Z-_]{1,64}",
                    "type": "string"
                },
                "example": "tochka-site-00"
            },
            "paymentUid": {
                "name": "paymentUid",
                "in": "path",
                "description": "Уникальный идентификатор платежа в информационной системе ТСП",
                "required": true,
                "schema": {
                    "pattern": "^[0-9a-zA-Z-]{1,64}$",
                    "type": "string"
                },
                "example": "977639EE70494C67"
            }
        }
    }
}
