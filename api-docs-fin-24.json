{
    "openapi": "3.0.1",
    "info": {
        "title": "API Приема платежей",
        "description": "# Электронная подпись запросов\n\nВ целях безопасности проведения финансовых операций через открытое API, необходимо формировать и передавать цифровую подпись запросов в заголовке `Signature` для следующих типов запросов:\n\n* [Платеж через форму мерчанта -> Создание платежа](/doc/v2/redoc/tag/Platezh-cherez-formu-merchanta?schema=https://api.tochka.com/static/v1/pay-gateway/docs/swagger.json#createPayment);\n* [Подтверждение -> Подтверждение платежа](/doc/v2/redoc/tag/Podtverzhdenie?schema=https://api.tochka.com/static/v1/pay-gateway/docs/swagger.json#createCapture);\n* [Возвраты -> Создание операции возврата](/doc/v2/redoc/tag/Vozvraty?schema=https://api.tochka.com/static/v1/pay-gateway/docs/swagger.json#createRefund).\n\nДля реализации проверки подписаных таким образом запросов мерчант должен передать нам открытый ключ на этапе подключения. Детали создания и передачи ключа см. в подразделе - [Формирование ключей](/doc/v2/redoc/section/Elektronnaya-podpis-zaprosov?schema=https://api.tochka.com/static/v1/pay-gateway/docs/swagger.json#Formirovanie-klyuchej). Детали создания и передачи подписи запроса см. в подразделе - [Подпись запроса](/doc/v2/redoc/section/Elektronnaya-podpis-zaprosov?schema=https://api.tochka.com/static/v1/pay-gateway/docs/swagger.json#Podpis-zaprosa).\n\n## Формирование ключей\n**Требования к ключам:**\n\n* Алгоритм — RSA;\n* Размер ключа — 2048-bit;\n* Форма передаваемого ключа — PEM формат, закодированный в Base64 одной строкой (без переносов).\n\n**Пример на Bash:**\n1. Сгенерировать закрытый ключ\n```bash\nopenssl genrsa -out private_key.pem 2048\n```\n\n2. Получить открытый ключ на основе закрытого\n```bash\nopenssl rsa -in private_key.pem -pubout -out public_key.pem\n```\n\n3. Закодировать открытый ключ в Base64\n```bash\nopenssl base64 -A -in public_key.pem -out public_key_base64.pem\n```\n\n4. В рамках подключения к API Точки передать полученный на предыдущем шаге `public_key_base64.pem`\n\n## Подпись запроса\n**Требования к подписи:**\n\n* Hash-функция — sha256;\n* Заголовок для передачи подписи - `Signature`;\n* Форма передачи подписи — \"сырая\" подпись, закодированная в Base64 одной строкой (без переносов).\n\n**Пример на Bash:**\n\n1. Подготовить тело запроса (в данном случае - предположим что оно в файле request.txt);\n```\nhello, world\n```\n2. Подписать тело запроса с помощью приватного ключа и с hash-функцией sha256;\n```bash\nopenssl dgst -sha256 -sign private_key.pem request.txt > sign_raw.txt\n```\n3. Закодировать \"сырую\" подпись в Base64;\n```bash\nopenssl base64 -A -in sign_raw.txt -out sign_base64.txt\n```\n4. Передавать содержимое `sign_base64.txt` в заголовке `Signature` запросов.\n\n\n# Аутентификация запросов\nДля аутентификации запросов используется JWT токен, который необходимо передать в заголовке `Authorization: Bearer <JWT_TOKEN>`.\n\nТокен вы сможете получить в процессе бординга или у менеджера сопровождения.\n\n\n# Тестирование\nДля проведения тестирования методов API используйте выданный вам в процессе бординга идентификатор сайта — `siteUid`. Тестируйте на картах из списка ниже, иначе операция будет отклонена.\n\n**Пул тестовых карт:**\n\n* VISA:\n  * 4282529780951108\n  * 4433079223745277\n  * 4433096334531891\n  * 4648276478204536\n  * 4433094693138127\n\n* MC:\n  * 5324619129671504\n  * 5186479678835191\n  * 5203415510291044\n  * 5586966955309532\n  * 5586966837580789\n\n* MIR:\n  * 2200111753579001\n  * 2200117996077364\n  * 2200119066335755\n  * 2200113704697015\n  * 2200119753612540\n\n## Конфигурация тестовых сценариев\n\nДля тестирования сценариев и имитации отклонённых операций используйте в запросе поле `comment`. Поле должно содержать строку с JSON-структурой флагов и их значений.\n\n**Пример заполнения поля:**\n\n```\n...\n\"Data\": {\n    ...\n    \"comment\": \"{\\\"decline_payment\\\":false, \\\"3ds_flow\\\": \\\"3ds1\\\"}\",\n    ...\n}\n...\n```\n\n_Описание флагов для принудительного отклонения операций:_\n\n* `\"decline_payment\"`: (Boolean) — при значении `true` платеж будет отклонен системой;\n* `\"decline_capture\"`: (Boolean) — при значении `true` подтверждение будет отклонено системой;\n* `\"decline_refund\"`: (Boolean) — при значении `true` возврат будет отклонен системой.\n\n_Описание флагов для тестирования сценариев 3DSecure (3DS):_\n\nДля тестирования сценария с 3DS либо проведите обычный платёж без данных сохранённой карты (без tokenizationCredentials), либо сформируйте запрос на привязку карты (tokenizationCredentials - CREDENTIAL_CAPTURED). Все платежи с привязанной карты (CIT_CREDENTIAL_ON_FILE/MIT_CREDENTIAL_ON_FILE) проходят без 3DS по умолчанию.\n\n* `\"3ds_flow\"`: (String) — задает версию 3DS. В зависимости от значения этого флага будет меняться версия пройденного 3DS в ответе на запрос завершения аутентификации. Процесс взаимодействия с апи не меняется.\nВозможные значения:\n  * `\"none\"` — значение по умолчанию\n  * `\"3ds1\"`\n  * `\"3ds2\"`\n\n\n**При отсутствии флага `3ds_flow` или значении `none` платеж будет переведен в статус `COMPLETED`.**\n\n**Для успешного завершения сценариев 3DS отправьте на complete следующий PaRes:**\n\n```\neJxVjkELgkAQhf+K7N127ZQ1rkTaJaRIO8uiky7kGjsa/fxWiUJ4h8e8j4+B+N09vBda0r2JWLASzENT9bU2TcR2t+Lob1gsoWgtYpJjNVqUkCGRatDTdcSo77DUNZpB3zVaJuGyvyL9t6eySAsiOx9OaVI6Ls2Bz7gE/pVOdlu1ygzcqcapkjsmakC5FmHoi8ClEGI7JQA+L07zQ/ni2Q9oEUph\n```\n\n\n# Справочники\n\n## Причины отклонения операции\n\nОбщий вид статуса отклонённой операции:\n\n```\n\"status\": {\n  \"value\": \"DECLINED\",\n  \"changedDateTime\": \"2099-01-01T12:34:56Z\",\n\n  \"reasonSource\": <Источник причины отклонения операции>,\n  \"reasonCode\": <Коды причины отклонения операции>,\n  \"reasonMessage\": \"Какое-либо пояснение причины отклонения\",\n\n  ...\n}\n```\n\n**Источники причины отклонения в проведении операции:**\n\n* **PROCESSING** - платежный процессинг;\n* **ACQUIRER** - шлюз - эквайрер;\n* **PAY_SYSTEM** - платежная система;\n* **ISSUER** - эмитент, выпустивший карту;\n* **MPI** - в процессе проведения 3DS;\n* **FRAUD** - служба фрод-мониторинга.\n\n**Коды причины отклонения операции:**\n\n* **INTERNAL_ERROR** - ошибка в бизнес-логике;\n* **TECH_ERROR** - общая техническая ошибка;\n* **LIMIT_EXCEEDED** - достигнут один из лимитов (оборот, кол-во операции и так далее);\n* **OPERATION_NOT_SUPPORTED** - операция не поддерживается на стороне источника;\n* **PAYMENT_NOT_FOUND** - не найдена исходная операция списания средств;\n* **INVALID_CARD** - в запросе передана некорректная карта;\n* **EXPIRED_CARD** - срок действия карты завершен;\n* **NOT_PERMITTED** - проведение операции запрещено;\n* **INTEGRATION_ERROR** - ошибка в интеграции с внешним эквайрером;\n* **VALIDATION_ERROR** - запрос не прошел проверку;\n* **INCORRECT_TRANSACTION_STATE** - попытка перевести операцию в некорректное состояние;\n* **INCORRECT_AMOUNT** - в запросе передана некорректная сумма;\n* **TOO_MANY_REQUESTS** - сработало ораничение на число запросов к процессингу;\n* **ISSUER_NOT_AVAILABLE** - эмитент не доступен по техническим причинам;\n* **REATTEMPT_NOT_PERMITTED** - повторение операции запрещено правилами платежной системы;\n* **INSUFFICIENT_FUNDS** - недостаточно средств на счете клиента;\n* **BLOCKED_CARD** - карта заблокирована;\n* **INCORRECT_CVV** - передан некорректный cvv код;\n* **EXPIRED_3DS** - 3DS не был завершен вовремя;\n* **SUSPECTED_FRAUD** - операция отклонена из-за подозрения в мошенничестве.\n\n## Статусы и коды ошибок\n\nОбщий вид ответа:\n\n```\n{\n  \"code\": <HTTP_STATUS>,\n  \"id\":\"4a0f8085-c255-4693-8f1e-68a5e4b0adb7\",\n  \"message\": <Категория ошибки>,\n  \"Errors\":[\n    {\n        \"errorCode\": <Подкатегория ошибки>,\n        \"message\":\"Более детальное пояснение проблемы\",\n        \"url\":\"https://enter.tochka.com/uapi/pay\"\n    }\n  ]\n}\n```\n\nБывает, что формат ответа отличается от представленного выше. В таком случае нужно повторить операцию. Если при повторной операции проблема сохранится, обратитесь в поддержку Точки.\n\nОписание возможных вариантов параметров ответа:\n\n**400** _(HTTP_STATUS)_\n* REQUEST_PARSING_ERROR _(Категория)_\n* REQUEST_VALIDATION_ERROR _(Категория)_\n\n**401** _(HTTP_STATUS)_\n* INVALID_TOKEN _(Категория)_\n  * UNKNOWN_TOKEN _(Подкатегория)_\n  * TOKEN_EXPIRED _(Подкатегория)_\n  * INCORRECT_FORMAT _(Подкатегория)_\n\n**403** _(HTTP_STATUS)_\n* OPERATION_FORBIDDEN _(Категория)_\n  * SIGNATURE_VERIFICATION_ERROR _(Подкатегория)_\n  * UNAUTHORIZED_BY_TOKEN _(Подкатегория)_\n  * FEATURE_DISABLED_FOR_MERCHANT_SITE _(Подкатегория)_\n\n**404** _(HTTP_STATUS)_\n* ENTITY_NOT_FOUND _(Категория)_\n  * MERCHANT_NOT_FOUND _(Подкатегория)_\n  * MERCHANT_SITE_NOT_FOUND _(Подкатегория)_\n  * PAYMENT_NOT_FOUND _(Подкатегория)_\n\n**423** _(HTTP_STATUS)_\n* OPERATION_LOCKED _(Категория)_\n  * PAYMENT_LOCKED _(Подкатегория)_\n\n**429** _(HTTP_STATUS)_\n* OPERATION_RATE_LIMIT _(Категория)_\n\n**500** _(HTTP_STATUS)_\n* INTERNAL_ERROR _(Категория)_\n  * CARD_PROCESSING_ERROR _(Подкатегория)_\n\n**501** _(HTTP_STATUS)_\n* UNSUPPORTED_OPERATION _(Категория)_\n  * NOT_SUPPORTED_BY_PROCESSING _(Подкатегория)_\n  * UNSUPPORTED_PAYMENT_METHOD _(Подкатегория)_\n\n**503** _(HTTP_STATUS)_\n* UNDERLYING_SERVICE_UNAVAILABLE _(Категория)_\n  * CONNECTION_BROKEN _(Подкатегория)_\n  * CONNECTION_TIMEOUT _(Подкатегория)_\n\n\n# Аутентификации покупателя (3DSecure)\n\nКлиенту необходимо пройти шаг аутентификации 3DSecure (3DS), если при выполнении операции [\"Создание платежа\"](/doc/v2/redoc/tag/Platezh-cherez-formu-merchanta?schema=https://api.tochka.com/static/v1/pay-gateway/docs/swagger.json#createPayment)\nв ответе вернулся объект `requirements` с полями:\n\n* `type` - `THREE_DS`;\n* `paReq` - зашифрованный запрос для аутентификации 3DS;\n* `acsUrl` - URL сервера аутентификации 3DS для перененаправления покупателя на страницу банка-эмитента.\n\n_По умолчанию с аутентификацией 3DS проходят:_\n* все разовые платежи (без объекта tokenizationCredentials)\n* все платежи, в рамках котороых идет привязка карты (tokenizationCredentials - CREDENTIAL_CAPTURED)\n\n_По умолчанию без аутентификации 3DS проходят:_\n* все платежи с привязанной карты\n  * CIT_CREDENTIAL_ON_FILE\n  * MIT_CREDENTIAL_ON_FILE (INSTALLMENT/RECURRING)\n\n## Инициирование аутентификации пользователя\nДля перенаправления пользователя на страницу проверки, используется POST запрос по адресу из поля `acsUrl`.\n**Передаваемые параметры:**\n* `TermUrl` - URL для перенаправления покупателя после успешной аутентификации 3DS;\n* `MD` - уникальный идентификатор транзакции;\n* `PaReq` - значение поля paReq из ответа на запрос \"Создание платежа\".\n\nПроцесс перенаправления унифицирован для 3DS 1.0 и 3DS 2.0. Версия протокола не влияет на интеграцию с API.\n\n## Завершение процесса аутентификации\n\nПо завершении процесса проверки клиент перенаправляется на адрес `TermUrl`, где в параметре `PaRes` передаётся зашифрованный результат аутентификации.\n\nДля завершения процесса 3DS аутентификации необходимо выполнить вызов метода API [\"Завершение аутентификации\"](/doc/v2/redoc/tag/Zavershenie-autentifikacii?schema=https://api.tochka.com/static/v1/pay-gateway/docs/swagger.json)\n\n",
        "version": "1.0"
    },
    "servers": [
        {
            "url": "https://enter.tochka.com/uapi/pay/",
            "description": "Боевой сервер Production"
        }
    ],
    "tags": [
        {
            "name": "Завершение аутентификации",
            "description": "Методы для завершения аутентификации"
        },
        {
            "name": "Подтверждение",
            "description": "Методы для подтверждения"
        },
        {
            "name": "Возвраты",
            "description": "Методы для проведения возвратов"
        },
        {
            "name": "Платеж через форму мерчанта",
            "description": "Методы для проведения платежей. \n\nДля использования методов приема платежей с передачей карточных данных вам необходимо подтвердить соответствие стандарту PCI DSS. \n\nСтандарт **PCI Data Security Standard (PCI DSS)** — это международный стандарт безопасности, созданный специально для защиты данных платежных карт. Он позволяет защитить организацию от инцидентов безопасности и&nbsp;обеспечить необходимый уровень защищенности во всей платежной системе."
        },
        {
            "name": "[WIP] Функциональные ссылки СБП",
            "description": "Методы для работы с Функциональными ссылками СБП \n <div style=\"\n              background-color: #fff8e1;border-left: 4px solid #ffc107;\npadding: 12px;margin-bottom: 20px;font-size: 14px;color: #856404;            \">\n            <strong>API функциональных ссылок СБП находится в разработке</strong>\n        </div>"
        }
    ],
    "paths": {
        "/{apiVersion}/sites/{siteUid}/sbp/qrc": {
            "post": {
                "tags": [
                    "[WIP] Функциональные ссылки СБП"
                ],
                "summary": "Создание Функциональной ссылки СБП",
                "description": "Создать Функциональную ссылку СБП",
                "operationId": "createQRCode",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/signature"
                    },
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/siteUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "apiVersion",
                        "in": "path",
                        "description": "Версия API",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "v1.0"
                            ]
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/WrappedRequestDTOCreateQRCodeRequestDTO"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/QRCodeResponseDTO"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "HTTPBadRequest",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "400",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "REQUEST_VALIDATION_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "data.amount",
                                            "message": "Incorrect operation amount. Should have correct number of fraction digits for currency RUB.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "401",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INVALID_TOKEN",
                                    "Errors": [
                                        {
                                            "errorCode": "TOKEN_EXPIRED",
                                            "message": "The token is expired, issue a new one",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "403",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_FORBIDDEN",
                                    "Errors": [
                                        {
                                            "errorCode": "SIGNATURE_VERIFICATION_ERROR",
                                            "message": "Invalid signature format",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "404",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "ENTITY_NOT_FOUND",
                                    "Errors": [
                                        {
                                            "errorCode": "MERCHANT_SITE_NOT_FOUND",
                                            "message": "Can not found merchant site with siteUid:<Some site uid>.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "423": {
                        "description": "Locked",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "423",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_LOCKED",
                                    "Errors": [
                                        {
                                            "errorCode": "PAYMENT_LOCKED",
                                            "message": "Payment with paymentUid:<some payment uid> already locked by parallel operation.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "500",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INTERNAL_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "CARD_PROCESSING_ERROR",
                                            "message": "Unexpected error on card processing side.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "501": {
                        "description": "Not Implemented",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "501",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNSUPPORTED_OPERATION",
                                    "Errors": [
                                        {
                                            "errorCode": "UNSUPPORTED_PAYMENT_METHOD",
                                            "message": "Payment method APPLE_PAY not supported by processing.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "503",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNDERLYING_SERVICE_UNAVAILABLE",
                                    "Errors": [
                                        {
                                            "errorCode": "CONNECTION_BROKEN",
                                            "message": "Service unavailable, please try operation later.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/{apiVersion}/sites/{siteUid}/payments": {
            "post": {
                "tags": [
                    "Платеж через форму мерчанта"
                ],
                "summary": "Создание платежа",
                "description": "Создать платежную транзакцию",
                "operationId": "createPayment",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/signature"
                    },
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/siteUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "apiVersion",
                        "in": "path",
                        "description": "Версия API",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "v1.0"
                            ]
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/WrappedRequestDTOCreatePaymentRequestDTO"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/PaymentResponseDTO"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "HTTPBadRequest",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "400",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "REQUEST_VALIDATION_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "data.amount",
                                            "message": "Incorrect operation amount. Should have correct number of fraction digits for currency RUB.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "401",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INVALID_TOKEN",
                                    "Errors": [
                                        {
                                            "errorCode": "TOKEN_EXPIRED",
                                            "message": "The token is expired, issue a new one",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "403",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_FORBIDDEN",
                                    "Errors": [
                                        {
                                            "errorCode": "SIGNATURE_VERIFICATION_ERROR",
                                            "message": "Invalid signature format",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "404",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "ENTITY_NOT_FOUND",
                                    "Errors": [
                                        {
                                            "errorCode": "MERCHANT_SITE_NOT_FOUND",
                                            "message": "Can not found merchant site with siteUid:<Some site uid>.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "423": {
                        "description": "Locked",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "423",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_LOCKED",
                                    "Errors": [
                                        {
                                            "errorCode": "PAYMENT_LOCKED",
                                            "message": "Payment with paymentUid:<some payment uid> already locked by parallel operation.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "500",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INTERNAL_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "CARD_PROCESSING_ERROR",
                                            "message": "Unexpected error on card processing side.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "501": {
                        "description": "Not Implemented",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "501",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNSUPPORTED_OPERATION",
                                    "Errors": [
                                        {
                                            "errorCode": "UNSUPPORTED_PAYMENT_METHOD",
                                            "message": "Payment method APPLE_PAY not supported by processing.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "503",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNDERLYING_SERVICE_UNAVAILABLE",
                                    "Errors": [
                                        {
                                            "errorCode": "CONNECTION_BROKEN",
                                            "message": "Service unavailable, please try operation later.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/{apiVersion}/sites/{siteUid}/payments/{paymentUid}/refunds": {
            "get": {
                "tags": [
                    "Возвраты"
                ],
                "summary": "Статус возвратов",
                "description": "Получить статусы всех возвратов для данного платежа",
                "operationId": "getRefunds",
                "parameters": [
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/siteUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "paymentUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/paymentUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    },
                    {
                        "name": "apiVersion",
                        "in": "path",
                        "description": "Версия API",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "v1.0"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/RefundResponseListDTO"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "HTTPBadRequest",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "400",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "REQUEST_VALIDATION_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "data.amount",
                                            "message": "Incorrect operation amount. Should have correct number of fraction digits for currency RUB.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "401",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INVALID_TOKEN",
                                    "Errors": [
                                        {
                                            "errorCode": "TOKEN_EXPIRED",
                                            "message": "The token is expired, issue a new one",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "403",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_FORBIDDEN",
                                    "Errors": [
                                        {
                                            "errorCode": "SIGNATURE_VERIFICATION_ERROR",
                                            "message": "Invalid signature format",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "404",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "ENTITY_NOT_FOUND",
                                    "Errors": [
                                        {
                                            "errorCode": "MERCHANT_SITE_NOT_FOUND",
                                            "message": "Can not found merchant site with siteUid:<Some site uid>.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "423": {
                        "description": "Locked",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "423",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_LOCKED",
                                    "Errors": [
                                        {
                                            "errorCode": "PAYMENT_LOCKED",
                                            "message": "Payment with paymentUid:<some payment uid> already locked by parallel operation.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "500",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INTERNAL_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "CARD_PROCESSING_ERROR",
                                            "message": "Unexpected error on card processing side.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "501": {
                        "description": "Not Implemented",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "501",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNSUPPORTED_OPERATION",
                                    "Errors": [
                                        {
                                            "errorCode": "UNSUPPORTED_PAYMENT_METHOD",
                                            "message": "Payment method APPLE_PAY not supported by processing.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "503",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNDERLYING_SERVICE_UNAVAILABLE",
                                    "Errors": [
                                        {
                                            "errorCode": "CONNECTION_BROKEN",
                                            "message": "Service unavailable, please try operation later.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Возвраты"
                ],
                "summary": "Создание операции возврата",
                "description": "Запрос предназначен для возврата средств по завершенному платежу",
                "operationId": "createRefund",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/signature"
                    },
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/siteUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "paymentUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/paymentUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    },
                    {
                        "name": "apiVersion",
                        "in": "path",
                        "description": "Версия API",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "v1.0"
                            ]
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/WrappedRequestDTORefundRequestDTO"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/RefundResponseDTO"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "HTTPBadRequest",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "400",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "REQUEST_VALIDATION_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "data.amount",
                                            "message": "Incorrect operation amount. Should have correct number of fraction digits for currency RUB.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "401",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INVALID_TOKEN",
                                    "Errors": [
                                        {
                                            "errorCode": "TOKEN_EXPIRED",
                                            "message": "The token is expired, issue a new one",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "403",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_FORBIDDEN",
                                    "Errors": [
                                        {
                                            "errorCode": "SIGNATURE_VERIFICATION_ERROR",
                                            "message": "Invalid signature format",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "404",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "ENTITY_NOT_FOUND",
                                    "Errors": [
                                        {
                                            "errorCode": "MERCHANT_SITE_NOT_FOUND",
                                            "message": "Can not found merchant site with siteUid:<Some site uid>.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "423": {
                        "description": "Locked",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "423",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_LOCKED",
                                    "Errors": [
                                        {
                                            "errorCode": "PAYMENT_LOCKED",
                                            "message": "Payment with paymentUid:<some payment uid> already locked by parallel operation.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "500",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INTERNAL_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "CARD_PROCESSING_ERROR",
                                            "message": "Unexpected error on card processing side.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "501": {
                        "description": "Not Implemented",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "501",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNSUPPORTED_OPERATION",
                                    "Errors": [
                                        {
                                            "errorCode": "UNSUPPORTED_PAYMENT_METHOD",
                                            "message": "Payment method APPLE_PAY not supported by processing.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "503",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNDERLYING_SERVICE_UNAVAILABLE",
                                    "Errors": [
                                        {
                                            "errorCode": "CONNECTION_BROKEN",
                                            "message": "Service unavailable, please try operation later.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/{apiVersion}/sites/{siteUid}/payments/{paymentUid}/complete": {
            "post": {
                "tags": [
                    "Завершение аутентификации"
                ],
                "summary": "Завершение аутентификации",
                "description": "После успешного прохождения дополнительной аутентификации, ТСП необходимо отправить запрос с параметрами соответствующими типу дополнительной аутентификации для завершения проверки",
                "operationId": "completePayment",
                "parameters": [
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/siteUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "paymentUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/paymentUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    },
                    {
                        "name": "apiVersion",
                        "in": "path",
                        "description": "Версия API",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "v1.0"
                            ]
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/WrappedRequestDTOCompleteRequestDTO"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/PaymentResponseDTO"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "HTTPBadRequest",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "400",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "REQUEST_VALIDATION_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "data.amount",
                                            "message": "Incorrect operation amount. Should have correct number of fraction digits for currency RUB.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "401",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INVALID_TOKEN",
                                    "Errors": [
                                        {
                                            "errorCode": "TOKEN_EXPIRED",
                                            "message": "The token is expired, issue a new one",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "403",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_FORBIDDEN",
                                    "Errors": [
                                        {
                                            "errorCode": "SIGNATURE_VERIFICATION_ERROR",
                                            "message": "Invalid signature format",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "404",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "ENTITY_NOT_FOUND",
                                    "Errors": [
                                        {
                                            "errorCode": "MERCHANT_SITE_NOT_FOUND",
                                            "message": "Can not found merchant site with siteUid:<Some site uid>.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "423": {
                        "description": "Locked",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "423",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_LOCKED",
                                    "Errors": [
                                        {
                                            "errorCode": "PAYMENT_LOCKED",
                                            "message": "Payment with paymentUid:<some payment uid> already locked by parallel operation.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "500",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INTERNAL_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "CARD_PROCESSING_ERROR",
                                            "message": "Unexpected error on card processing side.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "501": {
                        "description": "Not Implemented",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "501",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNSUPPORTED_OPERATION",
                                    "Errors": [
                                        {
                                            "errorCode": "UNSUPPORTED_PAYMENT_METHOD",
                                            "message": "Payment method APPLE_PAY not supported by processing.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "503",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNDERLYING_SERVICE_UNAVAILABLE",
                                    "Errors": [
                                        {
                                            "errorCode": "CONNECTION_BROKEN",
                                            "message": "Service unavailable, please try operation later.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/{apiVersion}/sites/{siteUid}/payments/{paymentUid}/captures": {
            "get": {
                "tags": [
                    "Подтверждение"
                ],
                "summary": "Список подтверждений платежа",
                "description": "Получить список попыток подтверждения платежа",
                "operationId": "getCaptures",
                "parameters": [
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/siteUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "paymentUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/paymentUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    },
                    {
                        "name": "apiVersion",
                        "in": "path",
                        "description": "Версия API",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "v1.0"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CaptureResponseListDTO"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "HTTPBadRequest",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "400",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "REQUEST_VALIDATION_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "data.amount",
                                            "message": "Incorrect operation amount. Should have correct number of fraction digits for currency RUB.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "401",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INVALID_TOKEN",
                                    "Errors": [
                                        {
                                            "errorCode": "TOKEN_EXPIRED",
                                            "message": "The token is expired, issue a new one",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "403",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_FORBIDDEN",
                                    "Errors": [
                                        {
                                            "errorCode": "SIGNATURE_VERIFICATION_ERROR",
                                            "message": "Invalid signature format",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "404",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "ENTITY_NOT_FOUND",
                                    "Errors": [
                                        {
                                            "errorCode": "MERCHANT_SITE_NOT_FOUND",
                                            "message": "Can not found merchant site with siteUid:<Some site uid>.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "423": {
                        "description": "Locked",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "423",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_LOCKED",
                                    "Errors": [
                                        {
                                            "errorCode": "PAYMENT_LOCKED",
                                            "message": "Payment with paymentUid:<some payment uid> already locked by parallel operation.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "500",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INTERNAL_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "CARD_PROCESSING_ERROR",
                                            "message": "Unexpected error on card processing side.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "501": {
                        "description": "Not Implemented",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "501",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNSUPPORTED_OPERATION",
                                    "Errors": [
                                        {
                                            "errorCode": "UNSUPPORTED_PAYMENT_METHOD",
                                            "message": "Payment method APPLE_PAY not supported by processing.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "503",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNDERLYING_SERVICE_UNAVAILABLE",
                                    "Errors": [
                                        {
                                            "errorCode": "CONNECTION_BROKEN",
                                            "message": "Service unavailable, please try operation later.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Подтверждение"
                ],
                "summary": "Подтверждение платежа",
                "description": "Подтвердить платеж после холдирования средств. Данный запрос необходим для подтверждения операции при двустадийном сценарии проведения платежа.\n**Возможно только однократное успешное подтверждение платежа.**",
                "operationId": "createCapture",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/signature"
                    },
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/siteUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "paymentUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/paymentUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    },
                    {
                        "name": "apiVersion",
                        "in": "path",
                        "description": "Версия API",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "v1.0"
                            ]
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/WrappedRequestDTOCaptureRequestDTO"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CaptureResponseDTO"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "HTTPBadRequest",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "400",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "REQUEST_VALIDATION_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "data.amount",
                                            "message": "Incorrect operation amount. Should have correct number of fraction digits for currency RUB.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "401",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INVALID_TOKEN",
                                    "Errors": [
                                        {
                                            "errorCode": "TOKEN_EXPIRED",
                                            "message": "The token is expired, issue a new one",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "403",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_FORBIDDEN",
                                    "Errors": [
                                        {
                                            "errorCode": "SIGNATURE_VERIFICATION_ERROR",
                                            "message": "Invalid signature format",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "404",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "ENTITY_NOT_FOUND",
                                    "Errors": [
                                        {
                                            "errorCode": "MERCHANT_SITE_NOT_FOUND",
                                            "message": "Can not found merchant site with siteUid:<Some site uid>.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "423": {
                        "description": "Locked",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "423",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_LOCKED",
                                    "Errors": [
                                        {
                                            "errorCode": "PAYMENT_LOCKED",
                                            "message": "Payment with paymentUid:<some payment uid> already locked by parallel operation.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "500",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INTERNAL_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "CARD_PROCESSING_ERROR",
                                            "message": "Unexpected error on card processing side.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "501": {
                        "description": "Not Implemented",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "501",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNSUPPORTED_OPERATION",
                                    "Errors": [
                                        {
                                            "errorCode": "UNSUPPORTED_PAYMENT_METHOD",
                                            "message": "Payment method APPLE_PAY not supported by processing.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "503",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNDERLYING_SERVICE_UNAVAILABLE",
                                    "Errors": [
                                        {
                                            "errorCode": "CONNECTION_BROKEN",
                                            "message": "Service unavailable, please try operation later.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/{apiVersion}/sites/{siteUid}/sbp/qrc/{qrcId}": {
            "get": {
                "tags": [
                    "[WIP] Функциональные ссылки СБП"
                ],
                "summary": "Запрос содержимого для ранее зарегистрированной Функциональной ссылки СБП",
                "description": "Получить содержимое ранее зарегистрированной Функциональной ссылки СБП",
                "operationId": "getQRCode",
                "parameters": [
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/siteUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "qrcId",
                        "in": "path",
                        "description": "Идентификатор зарегистрированной Функциональной ссылки СБП",
                        "required": true,
                        "schema": {
                            "maxLength": 32,
                            "minLength": 0,
                            "type": "string"
                        }
                    },
                    {
                        "name": "mediaType",
                        "in": "query",
                        "description": "Формат изображения QR-кода",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "image/png",
                                "image/svg+xml"
                            ]
                        }
                    },
                    {
                        "name": "width",
                        "in": "query",
                        "description": "Ширина изображения QR-кода",
                        "required": false,
                        "schema": {
                            "maximum": 1000,
                            "minimum": 200,
                            "type": "integer",
                            "format": "int32",
                            "default": 300
                        }
                    },
                    {
                        "name": "height",
                        "in": "query",
                        "description": "Высота изображения QR-кода",
                        "required": false,
                        "schema": {
                            "maximum": 1000,
                            "minimum": 200,
                            "type": "integer",
                            "format": "int32",
                            "default": 300
                        }
                    },
                    {
                        "name": "apiVersion",
                        "in": "path",
                        "description": "Версия API",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "v1.0"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/QRCodeResponseDTO"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "HTTPBadRequest",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "400",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "REQUEST_VALIDATION_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "data.amount",
                                            "message": "Incorrect operation amount. Should have correct number of fraction digits for currency RUB.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "401",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INVALID_TOKEN",
                                    "Errors": [
                                        {
                                            "errorCode": "TOKEN_EXPIRED",
                                            "message": "The token is expired, issue a new one",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "403",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_FORBIDDEN",
                                    "Errors": [
                                        {
                                            "errorCode": "SIGNATURE_VERIFICATION_ERROR",
                                            "message": "Invalid signature format",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "404",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "ENTITY_NOT_FOUND",
                                    "Errors": [
                                        {
                                            "errorCode": "MERCHANT_SITE_NOT_FOUND",
                                            "message": "Can not found merchant site with siteUid:<Some site uid>.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "423": {
                        "description": "Locked",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "423",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_LOCKED",
                                    "Errors": [
                                        {
                                            "errorCode": "PAYMENT_LOCKED",
                                            "message": "Payment with paymentUid:<some payment uid> already locked by parallel operation.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "500",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INTERNAL_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "CARD_PROCESSING_ERROR",
                                            "message": "Unexpected error on card processing side.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "501": {
                        "description": "Not Implemented",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "501",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNSUPPORTED_OPERATION",
                                    "Errors": [
                                        {
                                            "errorCode": "UNSUPPORTED_PAYMENT_METHOD",
                                            "message": "Payment method APPLE_PAY not supported by processing.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "503",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNDERLYING_SERVICE_UNAVAILABLE",
                                    "Errors": [
                                        {
                                            "errorCode": "CONNECTION_BROKEN",
                                            "message": "Service unavailable, please try operation later.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/{apiVersion}/sites/{siteUid}/payments/{paymentUid}": {
            "get": {
                "tags": [
                    "Платеж через форму мерчанта"
                ],
                "summary": "Статус платежа",
                "description": "Получить информацию о платежной транзакции",
                "operationId": "getPayment",
                "parameters": [
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/siteUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "paymentUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/paymentUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    },
                    {
                        "name": "apiVersion",
                        "in": "path",
                        "description": "Версия API",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "v1.0"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/PaymentResponseDTO"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "HTTPBadRequest",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "400",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "REQUEST_VALIDATION_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "data.amount",
                                            "message": "Incorrect operation amount. Should have correct number of fraction digits for currency RUB.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "401",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INVALID_TOKEN",
                                    "Errors": [
                                        {
                                            "errorCode": "TOKEN_EXPIRED",
                                            "message": "The token is expired, issue a new one",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "403",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_FORBIDDEN",
                                    "Errors": [
                                        {
                                            "errorCode": "SIGNATURE_VERIFICATION_ERROR",
                                            "message": "Invalid signature format",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "404",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "ENTITY_NOT_FOUND",
                                    "Errors": [
                                        {
                                            "errorCode": "MERCHANT_SITE_NOT_FOUND",
                                            "message": "Can not found merchant site with siteUid:<Some site uid>.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "423": {
                        "description": "Locked",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "423",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_LOCKED",
                                    "Errors": [
                                        {
                                            "errorCode": "PAYMENT_LOCKED",
                                            "message": "Payment with paymentUid:<some payment uid> already locked by parallel operation.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "500",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INTERNAL_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "CARD_PROCESSING_ERROR",
                                            "message": "Unexpected error on card processing side.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "501": {
                        "description": "Not Implemented",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "501",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNSUPPORTED_OPERATION",
                                    "Errors": [
                                        {
                                            "errorCode": "UNSUPPORTED_PAYMENT_METHOD",
                                            "message": "Payment method APPLE_PAY not supported by processing.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "503",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNDERLYING_SERVICE_UNAVAILABLE",
                                    "Errors": [
                                        {
                                            "errorCode": "CONNECTION_BROKEN",
                                            "message": "Service unavailable, please try operation later.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/{apiVersion}/sites/{siteUid}/payments/{paymentUid}/refunds/{refundUid}": {
            "get": {
                "tags": [
                    "Возвраты"
                ],
                "summary": "Статус возврата",
                "description": "Получить статус указанного возврата",
                "operationId": "getRefund",
                "parameters": [
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/siteUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "paymentUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/paymentUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    },
                    {
                        "name": "refundUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/refundUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    },
                    {
                        "name": "apiVersion",
                        "in": "path",
                        "description": "Версия API",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "v1.0"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/RefundResponseDTO"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "HTTPBadRequest",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "400",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "REQUEST_VALIDATION_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "data.amount",
                                            "message": "Incorrect operation amount. Should have correct number of fraction digits for currency RUB.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "401",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INVALID_TOKEN",
                                    "Errors": [
                                        {
                                            "errorCode": "TOKEN_EXPIRED",
                                            "message": "The token is expired, issue a new one",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "403",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_FORBIDDEN",
                                    "Errors": [
                                        {
                                            "errorCode": "SIGNATURE_VERIFICATION_ERROR",
                                            "message": "Invalid signature format",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "404",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "ENTITY_NOT_FOUND",
                                    "Errors": [
                                        {
                                            "errorCode": "MERCHANT_SITE_NOT_FOUND",
                                            "message": "Can not found merchant site with siteUid:<Some site uid>.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "423": {
                        "description": "Locked",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "423",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_LOCKED",
                                    "Errors": [
                                        {
                                            "errorCode": "PAYMENT_LOCKED",
                                            "message": "Payment with paymentUid:<some payment uid> already locked by parallel operation.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "500",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INTERNAL_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "CARD_PROCESSING_ERROR",
                                            "message": "Unexpected error on card processing side.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "501": {
                        "description": "Not Implemented",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "501",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNSUPPORTED_OPERATION",
                                    "Errors": [
                                        {
                                            "errorCode": "UNSUPPORTED_PAYMENT_METHOD",
                                            "message": "Payment method APPLE_PAY not supported by processing.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "503",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNDERLYING_SERVICE_UNAVAILABLE",
                                    "Errors": [
                                        {
                                            "errorCode": "CONNECTION_BROKEN",
                                            "message": "Service unavailable, please try operation later.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/{apiVersion}/sites/{siteUid}/payments/{paymentUid}/captures/{captureUid}": {
            "get": {
                "tags": [
                    "Подтверждение"
                ],
                "summary": "Статус подтверждения",
                "description": "Получить статус указанного подтверждения платежа",
                "operationId": "getCapture",
                "parameters": [
                    {
                        "name": "siteUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/siteUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-_]{1,64}",
                            "type": "string"
                        }
                    },
                    {
                        "name": "paymentUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/paymentUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    },
                    {
                        "name": "captureUid",
                        "in": "path",
                        "required": true,
                        "$ref": "#/components/parameters/captureUid",
                        "schema": {
                            "pattern": "^[0-9a-zA-Z-]{1,64}$",
                            "type": "string"
                        }
                    },
                    {
                        "name": "apiVersion",
                        "in": "path",
                        "description": "Версия API",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "v1.0"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CaptureResponseDTO"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "HTTPBadRequest",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "400",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "REQUEST_VALIDATION_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "data.amount",
                                            "message": "Incorrect operation amount. Should have correct number of fraction digits for currency RUB.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "401",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INVALID_TOKEN",
                                    "Errors": [
                                        {
                                            "errorCode": "TOKEN_EXPIRED",
                                            "message": "The token is expired, issue a new one",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "403",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_FORBIDDEN",
                                    "Errors": [
                                        {
                                            "errorCode": "SIGNATURE_VERIFICATION_ERROR",
                                            "message": "Invalid signature format",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "404",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "ENTITY_NOT_FOUND",
                                    "Errors": [
                                        {
                                            "errorCode": "MERCHANT_SITE_NOT_FOUND",
                                            "message": "Can not found merchant site with siteUid:<Some site uid>.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "423": {
                        "description": "Locked",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "423",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "OPERATION_LOCKED",
                                    "Errors": [
                                        {
                                            "errorCode": "PAYMENT_LOCKED",
                                            "message": "Payment with paymentUid:<some payment uid> already locked by parallel operation.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "500",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "INTERNAL_ERROR",
                                    "Errors": [
                                        {
                                            "errorCode": "CARD_PROCESSING_ERROR",
                                            "message": "Unexpected error on card processing side.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "501": {
                        "description": "Not Implemented",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "501",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNSUPPORTED_OPERATION",
                                    "Errors": [
                                        {
                                            "errorCode": "UNSUPPORTED_PAYMENT_METHOD",
                                            "message": "Payment method APPLE_PAY not supported by processing.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponseDTO"
                                },
                                "example": {
                                    "code": "503",
                                    "id": "c397b21a-d998-4c4d-9471-e60eaf816b87",
                                    "message": "UNDERLYING_SERVICE_UNAVAILABLE",
                                    "Errors": [
                                        {
                                            "errorCode": "CONNECTION_BROKEN",
                                            "message": "Service unavailable, please try operation later.",
                                            "url": "https://enter.tochka.com/uapi/pay"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "PaymentAmount": {
                "required": [
                    "amount",
                    "currency"
                ],
                "type": "object",
                "properties": {
                    "currency": {
                        "type": "string",
                        "description": "Валюта в формате ISO4217",
                        "example": "RUB"
                    },
                    "amount": {
                        "type": "string",
                        "description": "Сумма операции",
                        "example": "123.45"
                    }
                },
                "description": "Информация о сумме операции"
            },
            "CapturedAmount": {
                "required": [
                    "amount",
                    "currency"
                ],
                "type": "object",
                "properties": {
                    "currency": {
                        "type": "string",
                        "description": "Валюта в формате ISO4217",
                        "example": "RUB"
                    },
                    "amount": {
                        "type": "string",
                        "description": "Сумма операции",
                        "example": "123.45"
                    }
                },
                "description": "Информация о сумме подтверждений"
            },
            "RefundedAmount": {
                "required": [
                    "amount",
                    "currency"
                ],
                "type": "object",
                "properties": {
                    "currency": {
                        "type": "string",
                        "description": "Валюта в формате ISO4217",
                        "example": "RUB"
                    },
                    "amount": {
                        "type": "string",
                        "description": "Сумма операции",
                        "example": "123.45"
                    }
                },
                "description": "Информация о сумме возвратов"
            },
            "CreateQRCodeRequestDTO": {
                "required": [
                    "qrcType"
                ],
                "type": "object",
                "properties": {
                    "qrcType": {
                        "type": "string",
                        "description": "Тип функциональной ссылки СБП"
                    },
                    "imageParams": {
                        "$ref": "#/components/schemas/QRCodeImageCreationParamsDTO"
                    },
                    "redirectUrl": {
                        "maxLength": 1024,
                        "minLength": 0,
                        "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                        "type": "string",
                        "description": "Ссылка для автоматического возврата Плательщика из приложения Банка в приложение или на сайт ТСП",
                        "example": "https://exampletsp.io/qwertyui"
                    }
                },
                "discriminator": {
                    "propertyName": "qrcType"
                }
            },
            "MoneyDTO": {
                "$ref": "#/components/schemas/PaymentAmount"
            },
            "QRCodeDynamic": {
                "required": [
                    "amount",
                    "qrcType"
                ],
                "type": "object",
                "description": "Одноразовая Платежная ссылка СБП",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/CreateQRCodeRequestDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "amount": {
                                "$ref": "#/components/schemas/PaymentAmount"
                            },
                            "paymentToken": {
                                "$ref": "#/components/schemas/QRCodeTokenCreationParamsDTO"
                            },
                            "paymentPurpose": {
                                "maxLength": 140,
                                "minLength": 0,
                                "type": "string",
                                "description": "Назначение платежа",
                                "example": "Капучино 300 мл 1 шт."
                            },
                            "ttl": {
                                "maximum": 129600,
                                "minimum": 1,
                                "type": "integer",
                                "description": "Срок жизни Функциональной ссылки СБП в минутах",
                                "format": "int32"
                            },
                            "redirectUrl": {
                                "maxLength": 1024,
                                "minLength": 0,
                                "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                                "type": "string"
                            },
                            "qrcType": {
                                "type": "string",
                                "description": "Тип функциональной ссылки СБП",
                                "enum": [
                                    "DYNAMIC"
                                ]
                            }
                        }
                    }
                ]
            },
            "QRCodeImageCreationParamsDTO": {
                "required": [
                    "mediaType"
                ],
                "type": "object",
                "properties": {
                    "mediaType": {
                        "type": "string",
                        "description": "Формат изображения QR-кода",
                        "enum": [
                            "image/png",
                            "image/svg+xml"
                        ]
                    },
                    "width": {
                        "maximum": 1000,
                        "minimum": 200,
                        "type": "integer",
                        "description": "Ширина изображения QR-кода",
                        "format": "int32",
                        "default": 300
                    },
                    "height": {
                        "maximum": 1000,
                        "minimum": 200,
                        "type": "integer",
                        "description": "Высота изображения QR-кода",
                        "format": "int32",
                        "default": 300
                    }
                },
                "description": "Опциональные параметры для генерации изображения QR-кода"
            },
            "QRCodeStatic": {
                "required": [
                    "qrcType"
                ],
                "type": "object",
                "description": "Многоразовая Платежная ссылка СБП",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/CreateQRCodeRequestDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "amount": {
                                "$ref": "#/components/schemas/PaymentAmount"
                            },
                            "paymentPurpose": {
                                "maxLength": 140,
                                "minLength": 0,
                                "type": "string",
                                "description": "Назначение платежа",
                                "example": "Капучино 300 мл 1 шт."
                            },
                            "redirectUrl": {
                                "maxLength": 1024,
                                "minLength": 0,
                                "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                                "type": "string"
                            },
                            "qrcType": {
                                "type": "string",
                                "description": "Тип функциональной ссылки СБП",
                                "enum": [
                                    "STATIC"
                                ]
                            }
                        }
                    }
                ]
            },
            "QRCodeToken": {
                "required": [
                    "paymentToken",
                    "qrcType"
                ],
                "type": "object",
                "description": "Информационная ссылка СБП для привязки счета Плательщика",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/CreateQRCodeRequestDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "paymentToken": {
                                "$ref": "#/components/schemas/QRCodeTokenCreationParamsDTO"
                            },
                            "ttl": {
                                "maximum": 129600,
                                "minimum": 1,
                                "type": "integer",
                                "description": "Срок жизни Функциональной ссылки СБП в минутах",
                                "format": "int32"
                            },
                            "redirectUrl": {
                                "maxLength": 1024,
                                "minLength": 0,
                                "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                                "type": "string"
                            },
                            "qrcType": {
                                "type": "string",
                                "description": "Тип функциональной ссылки СБП",
                                "enum": [
                                    "TOKEN"
                                ]
                            }
                        }
                    }
                ]
            },
            "QRCodeTokenCreationParamsDTO": {
                "required": [
                    "tokenizationPurpose"
                ],
                "type": "object",
                "properties": {
                    "tokenizationPurpose": {
                        "maxLength": 140,
                        "minLength": 0,
                        "type": "string",
                        "description": "Назначение привязки счета Плательщика",
                        "example": "Подписка на сервис онлайн-кинотеатра"
                    }
                },
                "description": "Параметры для привязки счета Плательщика"
            },
            "WrappedRequestDTOCreateQRCodeRequestDTO": {
                "required": [
                    "Data"
                ],
                "type": "object",
                "properties": {
                    "Data": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/QRCodeDynamic"
                            },
                            {
                                "$ref": "#/components/schemas/QRCodeStatic"
                            },
                            {
                                "$ref": "#/components/schemas/QRCodeToken"
                            }
                        ]
                    }
                }
            },
            "QRCodeImageResponseDTO": {
                "required": [
                    "content",
                    "mediaType"
                ],
                "type": "object",
                "properties": {
                    "mediaType": {
                        "type": "string",
                        "description": "Формат изображения QR-кода",
                        "enum": [
                            "image/png",
                            "image/svg+xml"
                        ]
                    },
                    "content": {
                        "type": "string",
                        "description": "Закодированное изображение. Формат для декодирования зависит от mediaType",
                        "example": "iVBORw0KGgoAAAANSUhEUgAABEoAAARKCAIAAADXJAK3AAAABmJLR0QA/wD...YII="
                    }
                },
                "description": "Опциональные данные сгенерированного изображения QR-кода"
            },
            "QRCodeResponseDTO": {
                "required": [
                    "Data",
                    "Links",
                    "Meta"
                ],
                "type": "object",
                "properties": {
                    "Data": {
                        "required": [
                            "payload",
                            "qrcId"
                        ],
                        "type": "object",
                        "properties": {
                            "qrcId": {
                                "maxLength": 32,
                                "minLength": 0,
                                "type": "string",
                                "description": "Идентификатор зарегистрированной Функциональной ссылки СБП",
                                "example": "AS1000670LSS7DN18SJQDNP4B05KLJL2"
                            },
                            "payload": {
                                "maxLength": 999,
                                "minLength": 0,
                                "type": "string",
                                "description": "Payload зарегистрированной Функциональной ссылки СБП",
                                "example": "https://qr.nspk.ru/AS1000670LSS7DN18SJQDNP4B05KLJL2?type=01&bank=100000000001&sum=10000&cur=RUB&crc=C08B"
                            },
                            "image": {
                                "$ref": "#/components/schemas/QRCodeImageResponseDTO"
                            }
                        }
                    },
                    "Links": {
                        "required": [
                            "self"
                        ],
                        "type": "object",
                        "properties": {
                            "self": {
                                "maxLength": 2083,
                                "minLength": 1,
                                "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                                "type": "string",
                                "example": "https://enter.tochka.com/uapi/pay"
                            }
                        },
                        "description": "Links"
                    },
                    "Meta": {
                        "required": [
                            "totalPages"
                        ],
                        "type": "object",
                        "properties": {
                            "totalPages": {
                                "type": "integer",
                                "format": "int32"
                            }
                        }
                    }
                }
            },
            "AddressDTO": {
                "type": "object",
                "properties": {
                    "country": {
                        "maxLength": 64,
                        "minLength": 1,
                        "type": "string",
                        "description": "Страна адреса покупателя",
                        "example": "Russia"
                    },
                    "region": {
                        "maxLength": 64,
                        "minLength": 1,
                        "type": "string",
                        "description": "Регион адреса покупателя",
                        "example": "Moscow"
                    },
                    "city": {
                        "maxLength": 64,
                        "minLength": 1,
                        "type": "string",
                        "description": "Город адреса покупателя",
                        "example": "Moscow city"
                    },
                    "details": {
                        "maxLength": 256,
                        "minLength": 1,
                        "type": "string",
                        "description": "Детали адреса покупателя",
                        "example": "Verhnyaya Radishchevskaya ulica, dom 2/1"
                    }
                },
                "description": "Адрес покупателя"
            },
            "CardPaymentMethod": {
                "required": [
                    "expirationDate",
                    "pan",
                    "type"
                ],
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/PaymentMethodDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "pan": {
                                "pattern": "^\\d{13,19}$",
                                "type": "string",
                                "description": "Номер банковской карты",
                                "example": "22279992308606"
                            },
                            "expirationDate": {
                                "pattern": "(?:0?[1-9]|1[0-2])/[0-9]{2}",
                                "type": "string",
                                "description": "Срок действия банковской карты",
                                "example": "12/28"
                            },
                            "cvv2": {
                                "pattern": "^\\d{3}$",
                                "type": "string",
                                "description": "CVV2/CVC2 на банковской карте",
                                "example": "123"
                            },
                            "holderName": {
                                "pattern": "^[0-9a-zA-Z-/ _.']{1,26}$",
                                "type": "string",
                                "description": "Имя клиента, указанное на банковской карте",
                                "example": "CARD HOLDER"
                            },
                            "tokenizationCredentials": {
                                "oneOf": [
                                    {
                                        "$ref": "#/components/schemas/CitCredentialOnFile"
                                    },
                                    {
                                        "$ref": "#/components/schemas/CredentialCaptured"
                                    },
                                    {
                                        "$ref": "#/components/schemas/MitCredentialOnFile"
                                    }
                                ]
                            },
                            "captureMode": {
                                "type": "string",
                                "description": "Признак двухстадийного сценария: \n- `AUTO` — подтверждение платежа производится автоматически;  \n- `MANUAL` — требуется подтверждение платежа последующим запросом.\n На подтверждение двустадийного платежа у клиента есть ровно 3 дня плюс погрешность в 10 секунд,\n по истечению которых платёж будет автоматически подтверждён.\n Например, платеж был проведён  `20.05.2025 14:45:05.`\n Тогда автоподтверждение произойдёт в промежутке  `23.05.2025 14:45:05`-`23.05.2025 14:45:15`\n Обратите внимание, что возможно изменение сценария автоматического подтверждения на автоматическую отмену\n по истечению срока с помощью менеджеров сопровождения. \n Срок автоматического действия может быть скорректирован в меньшую сторону\n менеджером сопровождения, увеличение срока автоматического действия требует дополнительного согласования.",
                                "enum": [
                                    "AUTO",
                                    "MANUAL"
                                ]
                            },
                            "type": {
                                "type": "string",
                                "enum": [
                                    "CARD"
                                ]
                            }
                        }
                    }
                ]
            },
            "CitCredentialOnFile": {
                "required": [
                    "type"
                ],
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/TokenizationCredentialsRequestDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "type": {
                                "type": "string",
                                "description": "Тип операции: инициированная покупателем (CIT) оплата по ранее сохранённым реквизитам с участием покупателя",
                                "enum": [
                                    "CIT_CREDENTIAL_ON_FILE"
                                ]
                            },
                            "trn": {
                                "type": "string",
                                "description": "Идентификатор транзакции, в рамках которой была осуществлена привязка данной карты",
                                "example": "872635123"
                            }
                        }
                    }
                ]
            },
            "CreatePaymentRequestDTO": {
                "required": [
                    "amount",
                    "paymentMethod",
                    "paymentUid"
                ],
                "type": "object",
                "properties": {
                    "paymentUid": {
                        "pattern": "^[0-9a-zA-Z-]{1,64}$",
                        "type": "string",
                        "description": "Уникальный идентификатор платежа в информационной системе ТСП",
                        "example": "977639EE70494C67"
                    },
                    "orderUid": {
                        "pattern": "^[0-9a-zA-Z-:]{1,64}$",
                        "type": "string",
                        "description": "Уникальный идентификатор заказа в информационной системе ТСП",
                        "example": "12EKN0170494C67"
                    },
                    "amount": {
                        "$ref": "#/components/schemas/PaymentAmount"
                    },
                    "paymentMethod": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/CardPaymentMethod"
                            },
                            {
                                "$ref": "#/components/schemas/SBPTokenPaymentMethod"
                            }
                        ]
                    },
                    "customer": {
                        "$ref": "#/components/schemas/CustomerDTO"
                    },
                    "callbackUrl": {
                        "maxLength": 2083,
                        "minLength": 1,
                        "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                        "type": "string",
                        "description": "URL отправки уведомления об операции [feature in development]",
                        "example": "https://test.tochkapay.com/notification"
                    },
                    "comment": {
                        "maxLength": 255,
                        "minLength": 1,
                        "type": "string",
                        "description": "Комментарий"
                    },
                    "metadata": {
                        "maxLength": 2048,
                        "minLength": 0,
                        "type": "string",
                        "description": "Строка с json, содержащим дополнительные поля с произвольной информацией.\n Пример формата: `\"{\\\"property1\\\": \\\"string\\\"}\"`",
                        "example": "{\"key1\":\"value1\",\"key2\":\"value2\"}"
                    }
                }
            },
            "CredentialCaptured": {
                "required": [
                    "type"
                ],
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/TokenizationCredentialsRequestDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "type": {
                                "type": "string",
                                "description": "Тип операции: инициированная покупателем (CIT) операция c сохранением реквизитов для последующих списаний без ввода реквизитов",
                                "enum": [
                                    "CREDENTIAL_CAPTURED"
                                ]
                            }
                        }
                    }
                ]
            },
            "CustomerDTO": {
                "type": "object",
                "properties": {
                    "account": {
                        "maxLength": 64,
                        "minLength": 1,
                        "type": "string",
                        "description": "Идентификатор пользователя",
                        "example": "E268443E43D93DAB7EBEF303BBE9642F"
                    },
                    "email": {
                        "maxLength": 64,
                        "minLength": 1,
                        "pattern": "^[^@\\s]+@[^@\\s]+$",
                        "type": "string",
                        "description": "E-mail пользователя",
                        "example": "pay@tochka.com"
                    },
                    "phone": {
                        "pattern": "^\\+?\\d{11,16}$",
                        "type": "string",
                        "description": "Номер телефона пользователя",
                        "example": "79123456789"
                    },
                    "firstName": {
                        "maxLength": 64,
                        "minLength": 1,
                        "type": "string",
                        "description": "Имя покупателя",
                        "example": "Ivan"
                    },
                    "middleName": {
                        "maxLength": 64,
                        "minLength": 1,
                        "type": "string",
                        "description": "Отчество покупателя",
                        "example": "Ivanovich"
                    },
                    "lastName": {
                        "maxLength": 64,
                        "minLength": 1,
                        "type": "string",
                        "description": "Фамилия покупателя",
                        "example": "Ivanov"
                    },
                    "simpleAddress": {
                        "maxLength": 256,
                        "minLength": 1,
                        "type": "string",
                        "description": "Адрес покупателя",
                        "example": "Verhnyaya Radishchevskaya ulica, dom 2/1"
                    },
                    "address": {
                        "$ref": "#/components/schemas/AddressDTO"
                    }
                }
            },
            "MitCredentialOnFile": {
                "required": [
                    "subtype",
                    "type"
                ],
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/TokenizationCredentialsRequestDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "type": {
                                "type": "string",
                                "description": "Тип операции: инициированная ТСП (MIT) оплата по ранее сохранённым реквизитам без участия покупателя",
                                "enum": [
                                    "MIT_CREDENTIAL_ON_FILE"
                                ]
                            },
                            "trn": {
                                "type": "string",
                                "description": "Идентификатор транзакции, в рамках которой была осуществлена привязка данной карты",
                                "example": "872635123"
                            },
                            "subtype": {
                                "type": "string",
                                "description": "Тип оплаты в рамках использования сохраненных реквизитов\n\nINSTALLMENT — повторяющийся платёж по графику\n\n RECURRING — повторяющийся платёж без графика",
                                "enum": [
                                    "INSTALLMENT",
                                    "RECURRING"
                                ]
                            }
                        }
                    }
                ]
            },
            "PaymentMethodDTO": {
                "required": [
                    "type"
                ],
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string",
                        "description": "Тип платежного метода \n <div style=\"\n              background-color: #fff8e1;border-left: 4px solid #ffc107;\npadding: 10px;margin-bottom: 20px;font-size: 12px;color: #856404;            \">\n            <strong>Метод оплаты находится в разработке</strong>\n        </div>"
                    }
                },
                "description": "Метод платежа",
                "discriminator": {
                    "propertyName": "type"
                }
            },
            "SBPTokenPaymentMethod": {
                "required": [
                    "token",
                    "type"
                ],
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/PaymentMethodDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "token": {
                                "type": "string",
                                "description": "Идентификатор привязки счета Плательщика",
                                "example": "70LSS7DN18SJQRS10006DNPKLJL24B05"
                            },
                            "type": {
                                "type": "string",
                                "enum": [
                                    "SBP_TOKEN"
                                ]
                            }
                        }
                    }
                ]
            },
            "TokenizationCredentialsRequestDTO": {
                "required": [
                    "type"
                ],
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string"
                    }
                },
                "discriminator": {
                    "propertyName": "type"
                }
            },
            "WrappedRequestDTOCreatePaymentRequestDTO": {
                "required": [
                    "Data"
                ],
                "type": "object",
                "properties": {
                    "Data": {
                        "$ref": "#/components/schemas/CreatePaymentRequestDTO"
                    }
                }
            },
            "CardPaymentMethodResult": {
                "required": [
                    "captureMode",
                    "maskedPan",
                    "type"
                ],
                "type": "object",
                "description": "CARD",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/PaymentMethodResultDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "maskedPan": {
                                "pattern": "^\\d{8}\\*+\\d{2}$",
                                "type": "string",
                                "description": "Маскированный номер карты",
                                "example": "41111111******11"
                            },
                            "expirationDate": {
                                "pattern": "(?:0?[1-9]|1[0-2])/[0-9]{2}",
                                "type": "string",
                                "description": "Срок действия банковской карты",
                                "example": "12/28"
                            },
                            "holderName": {
                                "pattern": "^[0-9a-zA-Z-/ _.']{1,26}$",
                                "type": "string",
                                "description": "Имя клиента, указанное на банковской карте",
                                "example": "CARD HOLDER"
                            },
                            "rrn": {
                                "maxLength": 12,
                                "minLength": 12,
                                "type": "string",
                                "description": "RRN платежа",
                                "example": "003235873473"
                            },
                            "authCode": {
                                "pattern": "^\\d{6}$",
                                "type": "string",
                                "description": "Auth-code платежа",
                                "example": "347328"
                            },
                            "tokenizationCredentials": {
                                "$ref": "#/components/schemas/TokenizationCredentialsResult"
                            },
                            "threeDsFlowType": {
                                "type": "string",
                                "description": "Тип пройденной клиентом аутентификации",
                                "example": "THREE_DS_V1",
                                "enum": [
                                    "THREE_DS_V1",
                                    "THREE_DS_V2_FRICTIONLESS",
                                    "THREE_DS_V2_CHALLENGE",
                                    "NON_THREE_DS"
                                ]
                            },
                            "captureMode": {
                                "type": "string",
                                "description": "Признак двухстадийного сценария: \n- `AUTO` — подтверждение платежа производится автоматически;  \n- `MANUAL` — требуется подтверждение платежа последующим запросом.\n На подтверждение двустадийного платежа у клиента есть ровно 3 дня плюс погрешность в 10 секунд,\n по истечению которых платёж будет автоматически подтверждён.\n Например, платеж был проведён  `20.05.2025 14:45:05.`\n Тогда автоподтверждение произойдёт в промежутке  `23.05.2025 14:45:05`-`23.05.2025 14:45:15`\n Обратите внимание, что возможно изменение сценария автоматического подтверждения на автоматическую отмену\n по истечению срока с помощью менеджеров сопровождения. \n Срок автоматического действия может быть скорректирован в меньшую сторону\n менеджером сопровождения, увеличение срока автоматического действия требует дополнительного согласования.",
                                "enum": [
                                    "AUTO",
                                    "MANUAL"
                                ]
                            },
                            "type": {
                                "type": "string",
                                "enum": [
                                    "CARD"
                                ]
                            }
                        }
                    }
                ]
            },
            "Completed": {
                "required": [
                    "changedDateTime",
                    "value"
                ],
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/ResponseStatusDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "value": {
                                "type": "string",
                                "enum": [
                                    "COMPLETED"
                                ]
                            },
                            "changedDateTime": {
                                "type": "string",
                                "format": "date-time"
                            }
                        }
                    }
                ]
            },
            "Declined": {
                "required": [
                    "changedDateTime",
                    "reasonCode",
                    "reasonMessage",
                    "reasonSource",
                    "value"
                ],
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/ResponseStatusDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "value": {
                                "type": "string",
                                "enum": [
                                    "DECLINED"
                                ]
                            },
                            "changedDateTime": {
                                "type": "string",
                                "format": "date-time"
                            },
                            "reasonSource": {
                                "maxLength": 32,
                                "minLength": 1,
                                "type": "string",
                                "description": "Источник причины отклонения операции (см. Справочники - Причины отклонения операции)",
                                "example": "ISSUER"
                            },
                            "reasonCode": {
                                "maxLength": 64,
                                "minLength": 1,
                                "type": "string",
                                "description": "Код причины отклонения операции (см. Справочники - Причины отклонения операции)",
                                "example": "INSUFFICIENT_FUNDS"
                            },
                            "reasonMessage": {
                                "maxLength": 500,
                                "minLength": 1,
                                "type": "string",
                                "description": "Детализированное описание причины отклонения операции",
                                "example": "Недостаточно средств для проведения операции"
                            },
                            "psErrorCode": {
                                "maxLength": 5,
                                "minLength": 0,
                                "type": "string",
                                "description": "Код ответа платежной системы",
                                "example": "13"
                            }
                        }
                    }
                ]
            },
            "PaymentMethodResultDTO": {
                "required": [
                    "type"
                ],
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string",
                        "description": "Тип платежного метода"
                    }
                },
                "description": "Метод платежа",
                "discriminator": {
                    "propertyName": "type"
                }
            },
            "PaymentResponseDTO": {
                "required": [
                    "Data",
                    "Links",
                    "Meta"
                ],
                "type": "object",
                "properties": {
                    "Data": {
                        "required": [
                            "amount",
                            "capturedAmount",
                            "createdDateTime",
                            "isTest",
                            "metadata",
                            "paymentMethod",
                            "paymentUid",
                            "refundedAmount",
                            "status"
                        ],
                        "type": "object",
                        "properties": {
                            "paymentUid": {
                                "pattern": "^[0-9a-zA-Z-]{1,64}$",
                                "type": "string",
                                "description": "Уникальный идентификатор платежа в информационной системе ТСП",
                                "example": "977639EE70494C67"
                            },
                            "createdDateTime": {
                                "type": "string",
                                "description": "Дата создания платежа",
                                "format": "date-time",
                                "example": "2025-01-01T01:23:45+03:00"
                            },
                            "orderUid": {
                                "pattern": "^[0-9a-zA-Z-:]{1,64}$",
                                "type": "string",
                                "description": "Уникальный идентификатор заказа в информационной системе ТСП",
                                "example": "12EKN0170494C67"
                            },
                            "amount": {
                                "$ref": "#/components/schemas/PaymentAmount"
                            },
                            "capturedAmount": {
                                "$ref": "#/components/schemas/CapturedAmount"
                            },
                            "refundedAmount": {
                                "$ref": "#/components/schemas/RefundedAmount"
                            },
                            "paymentMethod": {
                                "oneOf": [
                                    {
                                        "$ref": "#/components/schemas/CardPaymentMethodResult"
                                    },
                                    {
                                        "$ref": "#/components/schemas/SBPPaymentMethodResult"
                                    },
                                    {
                                        "$ref": "#/components/schemas/SBPTokenPaymentMethodResult"
                                    }
                                ]
                            },
                            "status": {
                                "oneOf": [
                                    {
                                        "$ref": "#/components/schemas/Completed"
                                    },
                                    {
                                        "$ref": "#/components/schemas/Declined"
                                    },
                                    {
                                        "$ref": "#/components/schemas/Waiting"
                                    }
                                ]
                            },
                            "customer": {
                                "$ref": "#/components/schemas/CustomerDTO"
                            },
                            "requirements": {
                                "oneOf": [
                                    {
                                        "$ref": "#/components/schemas/ThreeDSRequirements"
                                    }
                                ]
                            },
                            "callbackUrl": {
                                "maxLength": 2083,
                                "minLength": 1,
                                "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                                "type": "string",
                                "description": "URL отправки уведомления об операции [feature in development]",
                                "example": "https://test.tochkapay.com/notification"
                            },
                            "comment": {
                                "maxLength": 255,
                                "minLength": 1,
                                "type": "string",
                                "description": "Комментарий"
                            },
                            "isTest": {
                                "type": "boolean",
                                "description": "Флаг тестовой операции"
                            },
                            "metadata": {
                                "type": "string",
                                "description": "Строка с json, содержащим дополнительные поля с произвольной информацией.\n Пример формата: `\"{\\\"property1\\\": \\\"string\\\"}\"`",
                                "example": "{\"key1\":\"value1\",\"key2\":\"value2\"}"
                            }
                        }
                    },
                    "Links": {
                        "required": [
                            "self"
                        ],
                        "type": "object",
                        "properties": {
                            "self": {
                                "maxLength": 2083,
                                "minLength": 1,
                                "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                                "type": "string",
                                "example": "https://enter.tochka.com/uapi/pay"
                            }
                        },
                        "description": "Links"
                    },
                    "Meta": {
                        "required": [
                            "totalPages"
                        ],
                        "type": "object",
                        "properties": {
                            "totalPages": {
                                "type": "integer",
                                "format": "int32"
                            }
                        }
                    }
                }
            },
            "RequirementsDTO": {
                "required": [
                    "type"
                ],
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string"
                    }
                },
                "description": "Требования для дополнительной аутентификации клиента",
                "discriminator": {
                    "propertyName": "type"
                }
            },
            "ResponseStatusDTO": {
                "required": [
                    "changedDateTime",
                    "value"
                ],
                "type": "object",
                "properties": {
                    "value": {
                        "type": "string",
                        "description": "Значение статуса операции"
                    },
                    "changedDateTime": {
                        "type": "string",
                        "description": "Дата обновления статуса операции",
                        "format": "date-time",
                        "example": "2025-01-01T01:23:45+03:00"
                    }
                },
                "description": "Статус операции"
            },
            "SBPPaymentMethodResult": {
                "required": [
                    "nspkTransactionId",
                    "qrcId",
                    "type"
                ],
                "type": "object",
                "description": "SBP",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/PaymentMethodResultDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "qrcId": {
                                "maxLength": 32,
                                "minLength": 0,
                                "type": "string",
                                "description": "Идентификатор Функциональной ссылки СБП",
                                "example": "AS1000670LSS7DN18SJQDNP4B05KLJL2"
                            },
                            "nspkTransactionId": {
                                "maxLength": 32,
                                "minLength": 32,
                                "type": "string",
                                "description": "Идентификатор транзакции в НСПК",
                                "example": "A12930013057370100000546241820D7"
                            },
                            "type": {
                                "type": "string",
                                "enum": [
                                    "SBP"
                                ]
                            }
                        }
                    }
                ]
            },
            "SBPTokenPaymentMethodResult": {
                "required": [
                    "qrcId",
                    "type"
                ],
                "type": "object",
                "description": "SBP_TOKEN",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/PaymentMethodResultDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "qrcId": {
                                "maxLength": 32,
                                "minLength": 0,
                                "type": "string",
                                "description": "Идентификатор Функциональной ссылки СБП",
                                "example": "AS1000670LSS7DN18SJQDNP4B05KLJL2"
                            },
                            "nspkTransactionId": {
                                "maxLength": 32,
                                "minLength": 32,
                                "type": "string",
                                "description": "Идентификатор транзакции в НСПК",
                                "example": "A12930013057370100000546241820D7"
                            },
                            "type": {
                                "type": "string",
                                "enum": [
                                    "SBP_TOKEN"
                                ]
                            }
                        }
                    }
                ]
            },
            "ThreeDSRequirements": {
                "required": [
                    "acsUrl",
                    "paReq"
                ],
                "type": "object",
                "description": "Данные для аутентификации банковских карт по протоколам 3DS и 3DS 2.0",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/RequirementsDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "paReq": {
                                "maxLength": 16384,
                                "minLength": 1,
                                "type": "string",
                                "description": "Сообщение для передачи в ACS банка-эмитента через браузер клиента",
                                "example": "BC58+5698AE46DE4=="
                            },
                            "acsUrl": {
                                "maxLength": 2083,
                                "minLength": 1,
                                "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                                "type": "string",
                                "description": "URL ACS сервера банка-эмитента для перенаправления клиента",
                                "example": "https://example.tochkapayment.ru/acs/"
                            }
                        }
                    }
                ]
            },
            "TokenizationCredentialsResult": {
                "required": [
                    "trn"
                ],
                "type": "object",
                "properties": {
                    "trn": {
                        "type": "string",
                        "description": "Идентификатор транзакции, в рамках которой была осуществлена привязка данной карты. \n Возвращается при инициировании покупателем оплаты c сохранением реквизитов (CREDENTIAL_CAPTURED)",
                        "example": "872635123"
                    }
                },
                "description": "Параметры для обработки операций с сохраненными картами"
            },
            "Waiting": {
                "required": [
                    "changedDateTime",
                    "value"
                ],
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/ResponseStatusDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "value": {
                                "type": "string",
                                "enum": [
                                    "WAITING"
                                ]
                            },
                            "changedDateTime": {
                                "type": "string",
                                "format": "date-time"
                            }
                        }
                    }
                ]
            },
            "RefundRequestDTO": {
                "required": [
                    "refundUid"
                ],
                "type": "object",
                "properties": {
                    "refundUid": {
                        "pattern": "^[0-9a-zA-Z-]{1,64}$",
                        "type": "string",
                        "description": "Уникальный идентификатор возврата в информационной системе ТСП"
                    },
                    "amount": {
                        "$ref": "#/components/schemas/MoneyDTO"
                    },
                    "callbackUrl": {
                        "maxLength": 2083,
                        "minLength": 1,
                        "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                        "type": "string",
                        "description": "URL отправки уведомления об операции",
                        "example": "https://test.tochkapay.com/notification"
                    },
                    "comment": {
                        "maxLength": 255,
                        "minLength": 1,
                        "type": "string",
                        "description": "Дополнительное описание возврата",
                        "example": "Возврат за услугу"
                    }
                }
            },
            "WrappedRequestDTORefundRequestDTO": {
                "required": [
                    "Data"
                ],
                "type": "object",
                "properties": {
                    "Data": {
                        "$ref": "#/components/schemas/RefundRequestDTO"
                    }
                }
            },
            "CardRefundMethodResultDTO": {
                "required": [
                    "isReversal",
                    "type"
                ],
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/RefundMethodResultDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "rrn": {
                                "maxLength": 12,
                                "minLength": 12,
                                "type": "string",
                                "description": "RRN операции",
                                "example": "003235873473"
                            },
                            "authCode": {
                                "pattern": "^\\d{6}$",
                                "type": "string",
                                "description": "Auth-code операции",
                                "example": "347328"
                            },
                            "isReversal": {
                                "type": "boolean",
                                "description": "Признак использования операции отмены"
                            },
                            "type": {
                                "type": "string",
                                "enum": [
                                    "CARD"
                                ]
                            }
                        }
                    }
                ]
            },
            "RefundMethodResultDTO": {
                "required": [
                    "type"
                ],
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string"
                    }
                },
                "description": "Дополнительные данные возврата"
            },
            "RefundResponseDTO": {
                "required": [
                    "Data",
                    "Links",
                    "Meta"
                ],
                "type": "object",
                "properties": {
                    "Data": {
                        "required": [
                            "amount",
                            "createdDateTime",
                            "refundUid",
                            "status"
                        ],
                        "type": "object",
                        "properties": {
                            "refundUid": {
                                "pattern": "^[0-9a-zA-Z-]{1,64}$",
                                "type": "string",
                                "description": "Уникальный идентификатор возврата в информационной системе ТСП",
                                "example": "8H7GSEE7018GC67"
                            },
                            "createdDateTime": {
                                "type": "string",
                                "description": "Дата создания операции в формате ISO8601",
                                "format": "date-time",
                                "example": "2025-01-01T01:23:45+03:00"
                            },
                            "amount": {
                                "$ref": "#/components/schemas/MoneyDTO"
                            },
                            "status": {
                                "oneOf": [
                                    {
                                        "$ref": "#/components/schemas/Completed"
                                    },
                                    {
                                        "$ref": "#/components/schemas/Declined"
                                    },
                                    {
                                        "$ref": "#/components/schemas/Waiting"
                                    }
                                ]
                            },
                            "callbackUrl": {
                                "maxLength": 2083,
                                "minLength": 1,
                                "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                                "type": "string",
                                "description": "URL отправки уведомления об операции",
                                "example": "https://test.tochkapay.com/notification"
                            },
                            "comment": {
                                "maxLength": 255,
                                "minLength": 1,
                                "type": "string",
                                "description": "Дополнительное описание возврата",
                                "example": "Возврат за услугу"
                            },
                            "refundMethodResult": {
                                "oneOf": [
                                    {
                                        "$ref": "#/components/schemas/CardRefundMethodResultDTO"
                                    },
                                    {
                                        "$ref": "#/components/schemas/SBPRefundMethodResultDTO"
                                    }
                                ]
                            }
                        }
                    },
                    "Links": {
                        "required": [
                            "self"
                        ],
                        "type": "object",
                        "properties": {
                            "self": {
                                "maxLength": 2083,
                                "minLength": 1,
                                "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                                "type": "string",
                                "example": "https://enter.tochka.com/uapi/pay"
                            }
                        },
                        "description": "Links"
                    },
                    "Meta": {
                        "required": [
                            "totalPages"
                        ],
                        "type": "object",
                        "properties": {
                            "totalPages": {
                                "type": "integer",
                                "format": "int32"
                            }
                        }
                    }
                }
            },
            "SBPRefundMethodResultDTO": {
                "required": [
                    "type"
                ],
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/RefundMethodResultDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "type": {
                                "type": "string",
                                "enum": [
                                    "SBP"
                                ]
                            }
                        }
                    }
                ]
            },
            "CompleteRequestDTO": {
                "required": [
                    "type"
                ],
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": [
                            "THREE_DS"
                        ]
                    }
                },
                "discriminator": {
                    "propertyName": "type"
                }
            },
            "ThreeDSCompleteRequestDTO": {
                "required": [
                    "paRes",
                    "type"
                ],
                "type": "object",
                "description": "Данные для аутентификации банковских карт по протоколам 3DS и 3DS 2.0",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/CompleteRequestDTO"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "paRes": {
                                "maxLength": 16384,
                                "minLength": 1,
                                "type": "string",
                                "description": "Результат аутентификации покупателя, полученный после возврата с ACS банка-эмитента",
                                "example": "eJxVjDsOwjAQBe+S0SWKiXHdwMhWmCbXIpZWa+O..."
                            }
                        }
                    }
                ]
            },
            "WrappedRequestDTOCompleteRequestDTO": {
                "required": [
                    "Data"
                ],
                "type": "object",
                "properties": {
                    "Data": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/ThreeDSCompleteRequestDTO"
                            }
                        ]
                    }
                }
            },
            "CaptureRequestDTO": {
                "required": [
                    "captureUid"
                ],
                "type": "object",
                "properties": {
                    "captureUid": {
                        "pattern": "^[0-9a-zA-Z-]{1,64}$",
                        "type": "string",
                        "description": "Идентификатор подтверждения платежа в информационной системе ТСП",
                        "example": "8H7GSEE7018GC67"
                    },
                    "amount": {
                        "$ref": "#/components/schemas/MoneyDTO"
                    },
                    "callbackUrl": {
                        "maxLength": 2083,
                        "minLength": 1,
                        "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                        "type": "string",
                        "description": "URL отправки уведомления об операции",
                        "example": "https://test.tochkapay.com/notification"
                    },
                    "comment": {
                        "maxLength": 255,
                        "minLength": 1,
                        "type": "string",
                        "description": "Комментарий"
                    }
                }
            },
            "WrappedRequestDTOCaptureRequestDTO": {
                "required": [
                    "Data"
                ],
                "type": "object",
                "properties": {
                    "Data": {
                        "$ref": "#/components/schemas/CaptureRequestDTO"
                    }
                }
            },
            "CaptureResponseDTO": {
                "required": [
                    "Data",
                    "Links",
                    "Meta"
                ],
                "type": "object",
                "properties": {
                    "Data": {
                        "required": [
                            "amount",
                            "captureUid",
                            "createdDateTime",
                            "status"
                        ],
                        "type": "object",
                        "properties": {
                            "captureUid": {
                                "pattern": "^[0-9a-zA-Z-]{1,64}$",
                                "type": "string"
                            },
                            "createdDateTime": {
                                "type": "string",
                                "description": "Дата создания подтверждения",
                                "format": "date-time",
                                "example": "2025-01-01T01:23:45+03:00"
                            },
                            "amount": {
                                "$ref": "#/components/schemas/MoneyDTO"
                            },
                            "status": {
                                "oneOf": [
                                    {
                                        "$ref": "#/components/schemas/Completed"
                                    },
                                    {
                                        "$ref": "#/components/schemas/Declined"
                                    },
                                    {
                                        "$ref": "#/components/schemas/Waiting"
                                    }
                                ]
                            },
                            "callbackUrl": {
                                "maxLength": 2083,
                                "minLength": 1,
                                "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                                "type": "string",
                                "description": "URL отправки уведомления об операции",
                                "example": "https://test.tochkapay.com/notification"
                            },
                            "comment": {
                                "maxLength": 255,
                                "minLength": 1,
                                "type": "string",
                                "description": "Комментарий"
                            }
                        }
                    },
                    "Links": {
                        "required": [
                            "self"
                        ],
                        "type": "object",
                        "properties": {
                            "self": {
                                "maxLength": 2083,
                                "minLength": 1,
                                "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                                "type": "string",
                                "example": "https://enter.tochka.com/uapi/pay"
                            }
                        },
                        "description": "Links"
                    },
                    "Meta": {
                        "required": [
                            "totalPages"
                        ],
                        "type": "object",
                        "properties": {
                            "totalPages": {
                                "type": "integer",
                                "format": "int32"
                            }
                        }
                    }
                }
            },
            "RefundResponseListDTO": {
                "required": [
                    "Data",
                    "Links",
                    "Meta"
                ],
                "type": "object",
                "properties": {
                    "Data": {
                        "type": "array",
                        "items": {
                            "required": [
                                "amount",
                                "createdDateTime",
                                "refundUid",
                                "status"
                            ],
                            "type": "object",
                            "properties": {
                                "refundUid": {
                                    "pattern": "^[0-9a-zA-Z-]{1,64}$",
                                    "type": "string",
                                    "description": "Уникальный идентификатор возврата в информационной системе ТСП",
                                    "example": "8H7GSEE7018GC67"
                                },
                                "createdDateTime": {
                                    "type": "string",
                                    "description": "Дата создания операции в формате ISO8601",
                                    "format": "date-time",
                                    "example": "2025-01-01T01:23:45+03:00"
                                },
                                "amount": {
                                    "$ref": "#/components/schemas/MoneyDTO"
                                },
                                "status": {
                                    "oneOf": [
                                        {
                                            "$ref": "#/components/schemas/Completed"
                                        },
                                        {
                                            "$ref": "#/components/schemas/Declined"
                                        },
                                        {
                                            "$ref": "#/components/schemas/Waiting"
                                        }
                                    ]
                                },
                                "callbackUrl": {
                                    "maxLength": 2083,
                                    "minLength": 1,
                                    "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                                    "type": "string",
                                    "description": "URL отправки уведомления об операции",
                                    "example": "https://test.tochkapay.com/notification"
                                },
                                "comment": {
                                    "maxLength": 255,
                                    "minLength": 1,
                                    "type": "string",
                                    "description": "Дополнительное описание возврата",
                                    "example": "Возврат за услугу"
                                },
                                "refundMethodResult": {
                                    "oneOf": [
                                        {
                                            "$ref": "#/components/schemas/CardRefundMethodResultDTO"
                                        },
                                        {
                                            "$ref": "#/components/schemas/SBPRefundMethodResultDTO"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "Links": {
                        "required": [
                            "self"
                        ],
                        "type": "object",
                        "properties": {
                            "self": {
                                "maxLength": 2083,
                                "minLength": 1,
                                "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                                "type": "string",
                                "example": "https://enter.tochka.com/uapi/pay"
                            }
                        },
                        "description": "Links"
                    },
                    "Meta": {
                        "required": [
                            "totalPages"
                        ],
                        "type": "object",
                        "properties": {
                            "totalPages": {
                                "type": "integer",
                                "format": "int32"
                            }
                        }
                    }
                }
            },
            "CaptureResponseListDTO": {
                "required": [
                    "Data",
                    "Links",
                    "Meta"
                ],
                "type": "object",
                "properties": {
                    "Data": {
                        "type": "array",
                        "items": {
                            "required": [
                                "amount",
                                "captureUid",
                                "createdDateTime",
                                "status"
                            ],
                            "type": "object",
                            "properties": {
                                "captureUid": {
                                    "pattern": "^[0-9a-zA-Z-]{1,64}$",
                                    "type": "string"
                                },
                                "createdDateTime": {
                                    "type": "string",
                                    "description": "Дата создания подтверждения",
                                    "format": "date-time",
                                    "example": "2025-01-01T01:23:45+03:00"
                                },
                                "amount": {
                                    "$ref": "#/components/schemas/MoneyDTO"
                                },
                                "status": {
                                    "oneOf": [
                                        {
                                            "$ref": "#/components/schemas/Completed"
                                        },
                                        {
                                            "$ref": "#/components/schemas/Declined"
                                        },
                                        {
                                            "$ref": "#/components/schemas/Waiting"
                                        }
                                    ]
                                },
                                "callbackUrl": {
                                    "maxLength": 2083,
                                    "minLength": 1,
                                    "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                                    "type": "string",
                                    "description": "URL отправки уведомления об операции",
                                    "example": "https://test.tochkapay.com/notification"
                                },
                                "comment": {
                                    "maxLength": 255,
                                    "minLength": 1,
                                    "type": "string",
                                    "description": "Комментарий"
                                }
                            }
                        }
                    },
                    "Links": {
                        "required": [
                            "self"
                        ],
                        "type": "object",
                        "properties": {
                            "self": {
                                "maxLength": 2083,
                                "minLength": 1,
                                "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                                "type": "string",
                                "example": "https://enter.tochka.com/uapi/pay"
                            }
                        },
                        "description": "Links"
                    },
                    "Meta": {
                        "required": [
                            "totalPages"
                        ],
                        "type": "object",
                        "properties": {
                            "totalPages": {
                                "type": "integer",
                                "format": "int32"
                            }
                        }
                    }
                }
            },
            "ErrorDetailsDTO": {
                "required": [
                    "errorCode",
                    "message",
                    "url"
                ],
                "type": "object",
                "properties": {
                    "errorCode": {
                        "maxLength": 200,
                        "minLength": 1,
                        "type": "string",
                        "description": "Низкоуровневое текстовое описание ошибки",
                        "example": "HTTPBadRequest"
                    },
                    "message": {
                        "maxLength": 603,
                        "minLength": 1,
                        "type": "string",
                        "description": "Описание ошибки. Обрезается если длина ошибки превышает максимальное значение",
                        "example": "Something going wrong"
                    },
                    "url": {
                        "maxLength": 2083,
                        "minLength": 1,
                        "pattern": "^https?://[-a-zA-Z0-9¡-￿+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9¡-￿+&@#/%=~_|]",
                        "type": "string",
                        "description": "URL для помощи в устранении проблемы",
                        "example": "http://enter.tochka.com/open-banking/docs"
                    }
                },
                "description": "Описание ошибки валидации конкретного поля"
            },
            "ErrorResponseDTO": {
                "required": [
                    "Errors",
                    "code",
                    "id",
                    "message"
                ],
                "type": "object",
                "properties": {
                    "code": {
                        "maxLength": 40,
                        "minLength": 1,
                        "type": "string",
                        "description": "Высокоуровневый текстовый код ошибки, необходимый для классификации",
                        "example": "400"
                    },
                    "id": {
                        "maxLength": 40,
                        "minLength": 1,
                        "type": "string",
                        "description": "Уникальный идентификатор ошибки, для целей аудита",
                        "example": "c397b21a-d998-4c4d-9471-e60eaf816b87"
                    },
                    "message": {
                        "maxLength": 600,
                        "minLength": 1,
                        "type": "string",
                        "description": "Краткое сообщение об ошибке",
                        "example": "Что-то пошло не так"
                    },
                    "Errors": {
                        "type": "array",
                        "description": "Описание ошибки валидации конкретного поля",
                        "items": {
                            "$ref": "#/components/schemas/ErrorDetailsDTO"
                        }
                    }
                }
            }
        },
        "parameters": {
            "siteUid": {
                "name": "siteUid",
                "in": "path",
                "description": "ID Сайта",
                "required": true,
                "schema": {
                    "pattern": "^[0-9a-zA-Z-_]{1,64}",
                    "type": "string"
                },
                "example": "tochka-site-00"
            },
            "paymentUid": {
                "name": "paymentUid",
                "in": "path",
                "description": "Уникальный идентификатор платежа в информационной системе ТСП",
                "required": true,
                "schema": {
                    "pattern": "^[0-9a-zA-Z-]{1,64}$",
                    "type": "string"
                },
                "example": "977639EE70494C67"
            },
            "captureUid": {
                "name": "captureUid",
                "in": "path",
                "description": "Идентификатор подтверждения платежа в информационной системе ТСП",
                "required": true,
                "schema": {
                    "pattern": "^[0-9a-zA-Z-]{1,64}$",
                    "type": "string"
                },
                "example": "8H7GSEE7018GC67"
            },
            "refundUid": {
                "name": "refundUid",
                "in": "path",
                "description": "Идентификатор возврата в информационной системе ТСП",
                "required": true,
                "schema": {
                    "pattern": "^[0-9a-zA-Z-]{1,64}$",
                    "type": "string"
                },
                "example": "8H7GSEE7018GC67"
            },
            "signature": {
                "name": "Signature",
                "in": "header",
                "description": "Электронная подпись тела запроса",
                "required": true,
                "schema": {
                    "type": "string"
                },
                "example": "Wc6UyGaSVfx7qPxHH...cqhVxPaauEe8FsUQQ+/9de+Kvl1Y9Q=="
            }
        }
    },
    "x-tagGroups": [
        {
            "name": "Методы",
            "tags": [
                "Платеж через форму мерчанта",
                "Завершение аутентификации",
                "Подтверждение",
                "Возвраты",
                "[WIP] Функциональные ссылки СБП"
            ]
        }
    ]
}
